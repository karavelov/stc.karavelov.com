_HiStOrY_V2_
show\040tables;
select\040*\040from\040cmsapp_customuser\040limit\0403;
select\040*\040from\040cmsapp_userreg\040limit\0403;
describe\040cmsapp_customuser;
describe\040cmsapp_userreg;
select\040*\040from\040cmsapp_customuser\040limit\0403\040\134G
select\040*\040from\040cmsapp_userreg\040limit\0403\040\134G
select\040max(id)\040from\040cmsapp_userreg
;
show\040create\040table\040cmsapp_userreg;
show\040create\040table\040cmsapp_userregco
;
show\040table;s
;
show\040table;s
show\040table;;
s\040show\040table;
show\040tables;
show\040create\040table\040cmsapp_customuser
;
show\040tables;
update\040cmsapp_customuser\040set\040password='bcrypt_sha256$$2b$12$CWDb1KO0/rgYfx/LLuo9geVCEWxqehJvV/1Y9aF4G7uWpIoNmTRIu';
describe\040cmsapp_customuser;
show\040tables;
describe\040cmsapp_street;
Искам\040да\040се\040направи\040mysql\040таблица\040като\040type_traffic_lights
и\040да\040се\040казва\040odmvr\040и\040да\040има\040следните\040колони:
ид
odmvr_name
кажи\040ми\040как\040ръчно\040да\040направя\040таблица\040в\040mysql\040без\040manage.py\040migrate
След\040като\040се\040направи\040таблицата\040като\040се\040базираш\040на\040тези\040темплейти\040и\040views\040и\040url\040като\040запазиш\040типа\040на\040имената\040за\040да\040има\040последователност\040ми\040изпрати\040техните\040аналози\040но\040за\040новата\040таблица:
file:manage_type_traffic_lights.html
{%\040extends\040'base.html'\040%}
{%\040block\040content\040%}
{%\040if\040request.user.is_superuser\040%}\040<!--\040Проверка\040дали\040потребителят\040е\040администратор\040-->
<div\040class="row">
\040\040\040\040<div\040class="col-lg-12\040grid-margin\040stretch-card">
\040\040\040\040\040\040\040\040<div\040class="card">
\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="card-body">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<h4\040class="card-title">Управление\040на\040тип\040светофари</h4>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<form\040method="get"\040class="d-flex\040align-items-center\040w-100">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="form-group\040mb-0\040mr-2"\040style="flex:\0401;\040position:\040relative;">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<label\040for="query"\040class="sr-only">Филтър\040по\040тип\040светофар</label>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<input\040type="text"\040id="query"\040name="query"\040class="form-control"
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040placeholder="Филтър\040по\040тип\040светофар"\040value="{{\040query\040}}"\040autocomplete="off">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040id="suggestions"\040class="list-group"
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040style="position:\040absolute;\040z-index:\0401000;\040width:\040100%;\040display:\040none;"></div>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<button\040type="submit"\040class="btn\040btn-dark\040mr-2">Филтриране</button>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="{%\040url\040'manage_type_traffic_lights'\040%}"\040class="btn\040btn-secondary">Нулиране</a>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</form>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<script>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040document.addEventListener("DOMContentLoaded",\040function\040()\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040let\040queryInput\040=\040document.getElementById("query");
Искам\040да\040се\040направи\040mysql\040таблица\040като\040type_traffic_lights\040и\040да\040се\040казва\040odmvr\040и\040да\040има\040следните\040колони:\040ид\040odmvr_name\040кажи\040ми\040как\040ръчно\040да\040направя\040таблица\040в\040mysql\040без\040manage.py\040migrate\040След\040като\040се\040направи\040таблицата\040като\040се\040базираш\040на\040тези\040темплейти\040и\040views\040и\040url\040като\040запазиш\040типа\040на\040имената\040за\040да\040има\040последователност\040ми\040изпрати\040техните\040аналози\040но\040за\040новата\040таблица:\040\040\040\040file:manage_type_traffic_lights.html\040\040{%\040extends\040'base.html'\040%}\040{%\040block\040content\040%}\040\040{%\040if\040request.user.is_superuser\040%}\040<!\040\040<div\040class="row">\040\040\040\040\040<div\040class="col-lg-12\040grid-margin\040stretch-card">\040\040\040\040\040\040\040\040\040<div\040class="card">\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="card-body">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<h4\040class="card-title">Управление\040на\040тип\040светофари</h4>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<form\040method="get"\040class="d-flex\040align-items-center\040w-100">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="form-group\040mb-0\040mr-2"\040style="flex:\0401;\040position:\040relative;">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<label\040for="query"\040class="sr-only">Филтър\040по\040тип\040светофар</label>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<input\040type="text"\040id="query"\040name="query"\040class="form-control"\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040placeholder="Филтър\040по\040тип\040светофар"\040value="{{\040query\040}}"\040autocomplete="off">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040id="suggestions"\040class="list-group"\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040style="position:\040absolute;\040z-index:\0401000;\040width:\040100%;\040display:\040none;"></div>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<button\040type="submit"\040class="btn\040btn-dark\040mr-2">Филтриране</button>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="{%\040url\040'manage_type_traffic_lights'\040%}"\040class="btn\040btn-secondary">Нулиране</a>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</form>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<script>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040document.addEventListener("DOMContentLoaded",\040function\040()\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040let\040queryInput\040=\040document.getElementById("query");
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040let\040suggestionsBox\040=\040document.getElementById("suggestions");
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040queryInput.addEventListener("input",\040function\040()\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040let\040query\040=\040queryInput.value.trim();
queryInput.addEventListener("input",\040function\040()\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040let\040query\040=\040queryInput.value.trim();
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040if\040(query.length\040<\0402)\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"none";
if\040(query.length\040<\0402)\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"none";
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040return;
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040fetch("/SearchType_Traffic_LightsAjax/?query="\040+\040encodeURIComponent(query))
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040.then(response\040=>\040response.json())
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040.then(data\040=>\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.innerHTML\040=\040"";
}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040fetch("/SearchType_Traffic_LightsAjax/?query="\040+\040encodeURIComponent(query))\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040.then(response\040=>\040response.json())\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040.then(data\040=>\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.innerHTML\040=\040"";
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040if\040(data.length\040>\0400)\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"block";
if\040(data.length\040>\0400)\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"block";
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040data.forEach(type\040=>\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040let\040item\040=\040document.createElement("a");
data.forEach(type\040=>\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040let\040item\040=\040document.createElement("a");
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040item.href\040=\040"#";
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040item.classList.add("list-group-item",\040"list-group-item-action");
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040item.textContent\040=\040type.type_traffic_lights_name;
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040item.addEventListener("click",\040function\040(event)\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040event.preventDefault();
item.addEventListener("click",\040function\040(event)\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040event.preventDefault();
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040queryInput.value\040=\040type.type_traffic_lights_name;
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"none";
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040document.querySelector('form').submit();
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040});
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.appendChild(item);
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040});
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040}\040else\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"none";
}\040else\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"none";
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040})
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040.catch(error\040=>\040console.error("Error\040fetching\040suggestions:",\040error));
}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040})\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040.catch(error\040=>\040console.error("Error\040fetching\040suggestions:",\040error));
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040});
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040document.addEventListener("click",\040function\040(event)\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040if\040(!queryInput.contains(event.target)\040&&\040!suggestionsBox.contains(event.target))\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"none";
document.addEventListener("click",\040function\040(event)\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040if\040(!queryInput.contains(event.target)\040&&\040!suggestionsBox.contains(event.target))\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"none";
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040});
}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040});
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040});
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</script>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<br\040/>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040include\040'includes/messages.html'\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="table-responsive"\040style="margin-top:50px;">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<table\040class="table\040table-bordered"\040style="border:1px\040solid\040#e8ecf1">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<thead>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<tr>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">#</th>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Тип\040Светофар</th>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Дата\040на\040създаване</th>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Дата\040на\040редактиране</th>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Действия</th>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</tr>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</thead>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<tbody>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040for\040i\040in\040type_traffic_lightss\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<tr>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040forloop.counter0|add:type_traffic_lightss.start_index\040}}</td>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040i.type_traffic_lights_name\040}}</td>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040i.created_at|date:"H:i\040ч.,\040d.m.Y"\040}}\040г.</td>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040i.updated_at|date:"H:i\040ч.,\040d.m.Y"\040}}\040г.</td>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="{%\040url\040'update_type_traffic_lights'\040i.id\040%}"
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040class="btn\040btn-success\040btn-sm">РЕДАКТИРАНЕ</a>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="#"\040data-href="{%\040url\040'delete_type_traffic_lights'\040i.id\040%}"
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040class="btn\040btn-danger\040btn-sm\040delete-btn"\040style="margin-left:5px">ИЗТРИВАНЕ</a>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</td>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</tr>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endfor\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</tbody>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</table>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040else\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<p\040class="text-center\040font-weight-bold"\040style="margin-top:20px;">Няма\040записи!</p>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss.has_other_pages\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="pagination"\040style="padding-top:\04010px;\040text-align:\040center;">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="btn-group\040btn-group-sm"\040role="group">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss.has_previous\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="?page={{\040type_traffic_lightss.previous_page_number\040}}"\040class="btn\040btn-secondary">⟵</a>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<span\040class="btn\040disabled">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040Страница\040{{\040type_traffic_lightss.number\040}}\040от\040{{\040type_traffic_lightss.paginator.num_pages\040}}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</span>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss.has_next\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="?page={{\040type_traffic_lightss.next_page_number\040}}"\040class="btn\040btn-secondary">⟶</a>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}
\040\040\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040</div>
\040\040\040\040</div>
</div>
<script>
\040\040\040\040document.querySelectorAll('.delete-btn').forEach(function\040(button)\040{
\040\040\040\040\040\040\040\040button.addEventListener('click',\040function\040(event)\040{
\040\040\040\040\040\040\040\040\040\040\040\040event.preventDefault();
</script>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<br\040/>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040include\040'includes/messages.html'\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="table-responsive"\040style="margin-top:50px;">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<table\040class="table\040table-bordered"\040style="border:1px\040solid\040#e8ecf1">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<thead>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<tr>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Тип\040Светофар</th>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Дата\040на\040създаване</th>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Дата\040на\040редактиране</th>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Действия</th>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</tr>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</thead>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<tbody>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040for\040i\040in\040type_traffic_lightss\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<tr>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040forloop.counter0|add:type_traffic_lightss.start_index\040}}</td>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040i.type_traffic_lights_name\040}}</td>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040i.created_at|date:"H:i\040ч.,\040d.m.Y"\040}}\040г.</td>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040i.updated_at|date:"H:i\040ч.,\040d.m.Y"\040}}\040г.</td>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="{%\040url\040'update_type_traffic_lights'\040i.id\040%}"\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040class="btn\040btn-success\040btn-sm">РЕДАКТИРАНЕ</a>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="#"\040data-href="{%\040url\040'delete_type_traffic_lights'\040i.id\040%}"\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040class="btn\040btn-danger\040btn-sm\040delete-btn"\040style="margin-left:5px">ИЗТРИВАНЕ</a>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</td>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</tr>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endfor\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</tbody>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</table>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040else\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<p\040class="text-center\040font-weight-bold"\040style="margin-top:20px;">Няма\040записи!</p>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss.has_other_pages\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="pagination"\040style="padding-top:\04010px;\040text-align:\040center;">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="btn-group\040btn-group-sm"\040role="group">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss.has_previous\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="?page={{\040type_traffic_lightss.previous_page_number\040}}"\040class="btn\040btn-secondary">⟵</a>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<span\040class="btn\040disabled">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040Страница\040{{\040type_traffic_lightss.number\040}}\040от\040{{\040type_traffic_lightss.paginator.num_pages\040}}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</span>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss.has_next\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="?page={{\040type_traffic_lightss.next_page_number\040}}"\040class="btn\040btn-secondary">⟶</a>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040</div>\040</div>\040\040<script>\040\040\040\040\040document.querySelectorAll('.delete-btn').forEach(function\040(button)\040{\040\040\040\040\040\040\040\040\040button.addEventListener('click',\040function\040(event)\040{\040\040\040\040\040\040\040\040\040\040\040\040\040event.preventDefault();
\040\040\040\040\040\040\040\040\040\040\040\040const\040deleteUrl\040=\040this.getAttribute('data-href');
\040\040\040\040\040\040\040\040\040\040\040\040Swal.fire({
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040title:\040'Сигурни\040ли\040сте?',
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040text:\040'Това\040действие\040не\040може\040да\040бъде\040отменено!',
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040icon:\040'warning',
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040showCancelButton:\040true,
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040confirmButtonColor:\040'#d33',
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040cancelButtonColor:\040'#3085d6',
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040confirmButtonText:\040'Да,\040изтрий!',
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040cancelButtonText:\040'Отказ'
\040\040\040\040\040\040\040\040\040\040\040\040}).then((result)\040=>\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040if\040(result.isConfirmed)\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040window.location.href\040=\040deleteUrl;
Swal.fire({\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040title:\040'Сигурни\040ли\040сте?',\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040text:\040'Това\040действие\040не\040може\040да\040бъде\040отменено!',\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040icon:\040'warning',\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040showCancelButton:\040true,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040confirmButtonColor:\040'#d33',\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040cancelButtonColor:\040'#3085d6',\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040confirmButtonText:\040'Да,\040изтрий!',\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040cancelButtonText:\040'Отказ'\040\040\040\040\040\040\040\040\040\040\040\040\040}).then((result)\040=>\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040if\040(result.isConfirmed)\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040window.location.href\040=\040deleteUrl;
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040}
\040\040\040\040\040\040\040\040\040\040\040\040});
}\040\040\040\040\040\040\040\040\040\040\040\040\040});
\040\040\040\040\040\040\040\040});
\040\040\040\040});
</script>
{%\040else\040%}
<div\040class="alert\040alert-danger"\040role="alert">
\040\040\040\040<h4\040class="alert-heading">Достъп\040отказан!</h4>
\040\040\040\040<p>Тази\040страница\040е\040достъпна\040само\040за\040администратори.</p>
</div>
{%\040endif\040%}
{%\040endblock\040%}
file:add_type_traffic_lights.html
{%\040extends\040'base.html'\040%}
{%\040block\040content\040%}
{%\040if\040request.user.is_superuser\040%}\040<!--\040Проверка\040дали\040потребителят\040е\040администратор\040-->
<div\040class="row">
\040\040<div\040class="col-12\040grid-margin\040stretch-card">\040<!--\040Използва\040col-12\040за\040full\040width\040-->
\040\040\040\040<div\040class="card">
\040\040\040\040\040\040<div\040class="card-body">
\040\040\040\040\040\040\040\040<h4\040class="card-title">Добавяне\040на\040тип\040светофар</h4>
\040\040\040\040\040\040\040\040<hr>
\040\040\040\040\040\040\040\040<form\040class="forms-sample"\040method="POST"\040action="{%\040url\040'add_type_traffic_lights'\040%}">
\040\040\040\040\040\040\040\040\040\040{%\040include\040'includes/messages.html'\040%}
\040\040\040\040\040\040\040\040\040\040{%\040csrf_token\040%}
\040\040\040\040\040\040\040\040\040\040<div\040class="form-group">
\040\040\040\040\040\040\040\040\040\040\040\040<label\040for="exampleInputUsername1">Тип\040светофар</label>
\040\040\040\040\040\040\040\040\040\040\040\040<input\040type="text"\040placeholder="Моля,\040въведете\040тип\040светофар"\040name="type_traffic_lights_name"
\040\040\040\040\040\040\040\040\040\040\040\040\040\040class="form-control"\040required="true">
\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040\040\040<button\040type="submit"\040class="btn\040btn-primary\040mr-2">Добавяне</button>
\040\040\040\040\040\040\040\040</form>
\040\040\040\040\040\040</div>
\040\040\040\040</div>
\040\040</div>
</div>
{%\040else\040%}
<div\040class="alert\040alert-danger"\040role="alert">
\040\040<h4\040class="alert-heading">Достъп\040отказан!</h4>
\040\040<p>Тази\040страница\040е\040достъпна\040само\040за\040администратори.</p>
</div>
{%\040endif\040%}
{%\040endblock\040%}
file:update_type_traffic_lights.html
{%\040extends\040'base.html'\040%}
{%\040block\040content\040%}
<div\040class="row">
\040\040\040\040<div\040class="col-lg-12\040grid-margin\040stretch-card">
\040\040\040\040\040\040\040\040<div\040class="card">
\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="card-body">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<h4\040class="card-title">Редактиране\040на\040тип\040светофар</h4>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<form\040method="POST">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040csrf_token\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="form-group">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<label\040for="type_traffic_lights_name">Тип\040светофар</label>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<input\040type="text"\040class="form-control"\040id="type_traffic_lights_name"\040name="type_traffic_lights_name"\040
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040value="{{\040type_traffic_lights.type_traffic_lights_name\040}}"\040required>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<button\040type="submit"\040class="btn\040btn-primary">Запази</button>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="{%\040url\040'manage_type_traffic_lights'\040%}"\040class="btn\040btn-secondary">Отказ</a>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</form>
\040\040\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040</div>
\040\040\040\040</div>
</div>
{%\040endblock\040%}
file:adminviews.py
@login_required(login_url='/')
def\040ADD_TYPE_TRAFFIC_LIGHTS(request):
\040\040\040\040if\040request.method\040==\040"POST":
\040\040\040\040\040\040\040\040type_traffic_lights_name\040=\040request.POST.get('type_traffic_lights_name').strip()\040\040#\040Премахване\040на\040излишни\040интервали
\040\040\040\040\040\040\040\040if\040Type_Traffic_Lights.objects.filter(type_traffic_lights_name__iexact=type_traffic_lights_name).exists():
\040\040\040\040\040\040\040\040\040\040\040\040messages.error(request,\040"Тип\040светофар\040с\040такова\040име\040вече\040съществува!")
\040\040\040\040\040\040\040\040\040\040\040\040return\040redirect("add_type_traffic_lights")\040\040#\040Пренасочва\040обратно\040към\040страницата\040за\040добавяне
\040\040\040\040\040\040\040\040
\040\040\040\040\040\040\040\040#\040Ако\040няма\040дублиращо\040се\040име,\040създава\040нов\040регион
\040\040\040\040\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights(type_traffic_lights_name=type_traffic_lights_name)
\040\040\040\040\040\040\040\040type_traffic_lights.save()
\040\040\040\040\040\040\040\040messages.success(request,\040"Типът\040светофар\040е\040добавен\040успешно!")
\040\040\040\040\040\040\040\040return\040redirect("manage_type_traffic_lights")\040\040#\040Пренасочване\040към\040списъка\040с\040региони
\040\040\040\040return\040render(request,\040'admin/add_type_traffic_lights.html')
@login_required(login_url='/')
def\040MANAGE_TYPE_TRAFFIC_LIGHTS(request):
\040\040\040\040query\040=\040request.GET.get('query',\040'').strip()\040\040#\040Взимаме\040въведената\040стойност\040от\040полето\040за\040търсене
\040\040\040\040#\040Филтриране\040по\040име\040на\040регион,\040ако\040има\040въведена\040стойност
\040\040\040\040if\040query:
\040\040\040\040\040\040\040\040type_traffic_lights_list\040=\040Type_Traffic_Lights.objects.filter(type_traffic_lights_name__icontains=query)
\040\040\040\040else:
\040\040\040\040\040\040\040\040type_traffic_lights_list\040=\040Type_Traffic_Lights.objects.all()
\040\040\040\040paginator\040=\040Paginator(type_traffic_lights_list,\0404)\040\040#\040Пагинация\040-\0404\040региона\040на\040страница
\040\040\040\040page_number\040=\040request.GET.get('page')
\040\040\040\040
\040\040\040\040try:
\040\040\040\040\040\040\040\040type_traffic_lightss\040=\040paginator.page(page_number)
\040\040\040\040except\040PageNotAnInteger:
\040\040\040\040\040\040\040\040type_traffic_lightss\040=\040paginator.page(1)
\040\040\040\040except\040EmptyPage:
\040\040\040\040\040\040\040\040type_traffic_lightss\040=\040paginator.page(paginator.num_pages)
\040\040\040\040context\040=\040{
\040\040\040\040\040\040\040\040'type_traffic_lightss':\040type_traffic_lightss,
\040\040\040\040\040\040\040\040'query':\040query,\040\040#\040Подаваме\040стойността\040на\040заявката\040обратно\040в\040шаблона
\040\040\040\040}
\040\040\040\040
\040\040\040\040return\040render(request,\040'admin/manage_type_traffic_lights.html',\040context)
@login_required(login_url='/')
def\040SEARCH_TYPE_TRAFFIC_LIGHTS_AJAX(request):
\040\040\040\040query\040=\040request.GET.get('query',\040'').strip()
\040\040\040\040if\040query:
\040\040\040\040\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights.objects.filter(type_traffic_lights_name__icontains=query).values('id',\040'type_traffic_lights_name')[:10]
\040\040\040\040\040\040\040\040return\040JsonResponse(list(type_traffic_lights),\040safe=False)
\040\040\040\040return\040JsonResponse([],\040safe=False)
@login_required(login_url='/')
def\040UPDATE_TYPE_TRAFFIC_LIGHTS(request,\040id):
\040\040\040\040#\040Вземане\040на\040съществуващия\040запис
\040\040\040\040type_traffic_lights\040=\040get_object_or_404(Type_Traffic_Lights,\040id=id)
\040\040\040\040if\040request.method\040==\040'POST':
\040\040\040\040\040\040\040\040type_traffic_lights_name\040=\040request.POST.get('type_traffic_lights_name')
\040\040\040\040\040\040\040\040#\040Запазване\040на\040новите\040данни
\040\040\040\040\040\040\040\040type_traffic_lights.type_traffic_lights_name\040=\040type_traffic_lights_name
\040\040\040\040\040\040\040\040type_traffic_lights.save()
\040\040\040\040\040\040\040\040messages.success(request,\040"Типът\040светофар\040е\040обновен\040успешно!")
\040\040\040\040\040\040\040\040return\040redirect('manage_type_traffic_lights')
\040\040\040\040#\040Подаване\040на\040данните\040към\040шаблона
\040\040\040\040context\040=\040{
\040\040\040\040\040\040\040\040'type_traffic_lights':\040type_traffic_lights
\040\040\040\040}
\040\040\040\040return\040render(request,\040'admin/update_type_traffic_lights.html',\040context)
@login_required(login_url='/')
def\040UPDATE_TYPE_TRAFFIC_LIGHTS_DETAILS(request):
\040\040\040\040\040\040\040\040if\040request.method\040==\040'POST':
\040\040\040\040\040\040\040\040\040\040type_traffic_lights_id\040=\040request.POST.get('type_traffic_lights_id')
\040\040\040\040\040\040\040\040\040\040type_traffic_lights_name\040=\040request.POST.get('type_traffic_lights_name')
\040\040\040\040\040\040\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights.objects.get(id=type_traffic_lights_id)
\040\040\040\040\040\040\040\040\040\040type_traffic_lights.type_traffic_lights_name\040=\040type_traffic_lights_name
\040\040\040\040\040\040\040\040\040\040type_traffic_lights.save()
\040\040\040\040\040\040\040\040\040\040messages.success(request,"Района\040е\040обновен\040успешно!")
\040\040\040\040\040\040\040\040\040\040return\040redirect('manage_type_traffic_lights')
\040\040\040\040\040\040\040\040return\040render(request,\040'admin/update_type_traffic_lights.html')
@login_required(login_url='/')
def\040DELETE_TYPE_TRAFFIC_LIGHTS(request,id):
\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights.objects.get(id=id)
\040\040\040\040type_traffic_lights.delete()
\040\040\040\040messages.success(request,'Типът\040светофар\040е\040изтрит\040успешно!')
\040\040\040\040return\040redirect('manage_type_traffic_lights')
file:models.py
class\040Type_Traffic_Lights(models.Model):
\040\040\040\040#\040полета\040на\040модела
\040\040\040\040type_traffic_lights_name\040=\040models.CharField(max_length=100,\040default='')
\040\040\040\040created_at\040=\040models.DateTimeField(auto_now_add=True)
\040\040\040\040updated_at\040=\040models.DateTimeField(auto_now=True)
file:\040urls.py
\040\040\040\040path('AddType_Traffic_Lights',\040adminviews.ADD_TYPE_TRAFFIC_LIGHTS,\040name='add_type_traffic_lights'),
\040\040\040\040path('ManageType_Traffic_Lights',\040adminviews.MANAGE_TYPE_TRAFFIC_LIGHTS,\040name='manage_type_traffic_lights'),
\040\040\040\040path('SearchType_Traffic_LightsAjax/',\040adminviews.SEARCH_TYPE_TRAFFIC_LIGHTS_AJAX,\040name='search_type_traffic_lights_ajax'),
\040\040\040\040path('DeleteType_Traffic_Lights/<str:id>',\040adminviews.DELETE_TYPE_TRAFFIC_LIGHTS,\040name='delete_type_traffic_lights'),
\040\040\040\040path('UpdateType_Traffic_Lights/<int:id>',\040adminviews.UPDATE_TYPE_TRAFFIC_LIGHTS,\040name='update_type_traffic_lights'),
\040\040\040\040path('UpdateType_Traffic_LightsDetails',\040adminviews.UPDATE_TYPE_TRAFFIC_LIGHTS_DETAILS,\040name='update_type_traffic_lights_details'),
;
</script>\040{%\040else\040%}\040<div\040class="alert\040alert-danger"\040role="alert">\040\040\040\040\040<h4\040class="alert-heading">Достъп\040отказан!</h4>\040\040\040\040\040<p>Тази\040страница\040е\040достъпна\040само\040за\040администратори.</p>\040</div>\040{%\040endif\040%}\040{%\040endblock\040%}\040\040file:add_type_traffic_lights.html\040{%\040extends\040'base.html'\040%}\040{%\040block\040content\040%}\040\040{%\040if\040request.user.is_superuser\040%}\040<!\040\040<div\040class="row">\040\040\040<div\040class="col-12\040grid-margin\040stretch-card">\040<!\040\040\040\040\040<div\040class="card">\040\040\040\040\040\040\040<div\040class="card-body">\040\040\040\040\040\040\040\040\040<h4\040class="card-title">Добавяне\040на\040тип\040светофар</h4>\040\040\040\040\040\040\040\040\040<hr>\040\040\040\040\040\040\040\040\040<form\040class="forms-sample"\040method="POST"\040action="{%\040url\040'add_type_traffic_lights'\040%}">\040\040\040\040\040\040\040\040\040\040\040{%\040include\040'includes/messages.html'\040%}\040\040\040\040\040\040\040\040\040\040\040{%\040csrf_token\040%}\040\040\040\040\040\040\040\040\040\040\040<div\040class="form-group">\040\040\040\040\040\040\040\040\040\040\040\040\040<label\040for="exampleInputUsername1">Тип\040светофар</label>\040\040\040\040\040\040\040\040\040\040\040\040\040<input\040type="text"\040placeholder="Моля,\040въведете\040тип\040светофар"\040name="type_traffic_lights_name"\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040class="form-control"\040required="true">\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040\040\040<button\040type="submit"\040class="btn\040btn-primary\040mr-2">Добавяне</button>\040\040\040\040\040\040\040\040\040</form>\040\040\040\040\040\040\040</div>\040\040\040\040\040</div>\040\040\040</div>\040</div>\040\040{%\040else\040%}\040<div\040class="alert\040alert-danger"\040role="alert">\040\040\040<h4\040class="alert-heading">Достъп\040отказан!</h4>\040\040\040<p>Тази\040страница\040е\040достъпна\040само\040за\040администратори.</p>\040</div>\040{%\040endif\040%}\040{%\040endblock\040%}\040\040\040file:update_type_traffic_lights.html\040{%\040extends\040'base.html'\040%}\040\040{%\040block\040content\040%}\040<div\040class="row">\040\040\040\040\040<div\040class="col-lg-12\040grid-margin\040stretch-card">\040\040\040\040\040\040\040\040\040<div\040class="card">\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="card-body">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<h4\040class="card-title">Редактиране\040на\040тип\040светофар</h4>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<form\040method="POST">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040csrf_token\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="form-group">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<label\040for="type_traffic_lights_name">Тип\040светофар</label>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<input\040type="text"\040class="form-control"\040id="type_traffic_lights_name"\040name="type_traffic_lights_name"\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040value="{{\040type_traffic_lights.type_traffic_lights_name\040}}"\040required>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<button\040type="submit"\040class="btn\040btn-primary">Запази</button>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="{%\040url\040'manage_type_traffic_lights'\040%}"\040class="btn\040btn-secondary">Отказ</a>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</form>\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040</div>\040</div>\040{%\040endblock\040%}\040\040\040file:adminviews.py\040\040\040\040@login_required(login_url='/')\040def\040ADD_TYPE_TRAFFIC_LIGHTS(request):\040\040\040\040\040if\040request.method\040==\040"POST":\040\040\040\040\040\040\040\040\040type_traffic_lights_name\040=\040request.POST.get('type_traffic_lights_name').strip()\040\040\040\040\040\040\040\040\040\040\040if\040Type_Traffic_Lights.objects.filter(type_traffic_lights_name__iexact=type_traffic_lights_name).exists():\040\040\040\040\040\040\040\040\040\040\040\040\040messages.error(request,\040"Тип\040светофар\040с\040такова\040име\040вече\040съществува!")\040\040\040\040\040\040\040\040\040\040\040\040\040return\040redirect("add_type_traffic_lights")\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights(type_traffic_lights_name=type_traffic_lights_name)\040\040\040\040\040\040\040\040\040type_traffic_lights.save()\040\040\040\040\040\040\040\040\040messages.success(request,\040"Типът\040светофар\040е\040добавен\040успешно!")\040\040\040\040\040\040\040\040\040return\040redirect("manage_type_traffic_lights")\040\040\040\040\040\040\040\040return\040render(request,\040'admin/add_type_traffic_lights.html')\040\040@login_required(login_url='/')\040def\040MANAGE_TYPE_TRAFFIC_LIGHTS(request):\040\040\040\040\040query\040=\040request.GET.get('query',\040'').strip()\040\040\040\040\040\040\040\040\040\040\040\040\040if\040query:\040\040\040\040\040\040\040\040\040type_traffic_lights_list\040=\040Type_Traffic_Lights.objects.filter(type_traffic_lights_name__icontains=query)\040\040\040\040\040else:\040\040\040\040\040\040\040\040\040type_traffic_lights_list\040=\040Type_Traffic_Lights.objects.all()\040\040\040\040\040\040paginator\040=\040Paginator(type_traffic_lights_list,\0404)\040\040\040\040\040\040\040page_number\040=\040request.GET.get('page')\040\040\040\040\040\040\040\040\040\040try:\040\040\040\040\040\040\040\040\040type_traffic_lightss\040=\040paginator.page(page_number)\040\040\040\040\040except\040PageNotAnInteger:\040\040\040\040\040\040\040\040\040type_traffic_lightss\040=\040paginator.page(1)\040\040\040\040\040except\040EmptyPage:\040\040\040\040\040\040\040\040\040type_traffic_lightss\040=\040paginator.page(paginator.num_pages)\040\040\040\040\040\040context\040=\040{\040\040\040\040\040\040\040\040\040'type_traffic_lightss':\040type_traffic_lightss,\040\040\040\040\040\040\040\040\040'query':\040query,\040\040\040\040\040\040\040}\040\040\040\040\040\040\040\040\040\040return\040render(request,\040'admin/manage_type_traffic_lights.html',\040context)\040\040@login_required(login_url='/')\040def\040SEARCH_TYPE_TRAFFIC_LIGHTS_AJAX(request):\040\040\040\040\040query\040=\040request.GET.get('query',\040'').strip()\040\040\040\040\040if\040query:\040\040\040\040\040\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights.objects.filter(type_traffic_lights_name__icontains=query).values('id',\040'type_traffic_lights_name')[:10]\040\040\040\040\040\040\040\040\040return\040JsonResponse(list(type_traffic_lights),\040safe=False)\040\040\040\040\040return\040JsonResponse([],\040safe=False)\040\040@login_required(login_url='/')\040def\040UPDATE_TYPE_TRAFFIC_LIGHTS(request,\040id):\040\040\040\040\040\040\040\040\040\040type_traffic_lights\040=\040get_object_or_404(Type_Traffic_Lights,\040id=id)\040\040\040\040\040\040if\040request.method\040==\040'POST':\040\040\040\040\040\040\040\040\040type_traffic_lights_name\040=\040request.POST.get('type_traffic_lights_name')\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040type_traffic_lights.type_traffic_lights_name\040=\040type_traffic_lights_name\040\040\040\040\040\040\040\040\040type_traffic_lights.save()\040\040\040\040\040\040\040\040\040\040messages.success(request,\040"Типът\040светофар\040е\040обновен\040успешно!")\040\040\040\040\040\040\040\040\040return\040redirect('manage_type_traffic_lights')\040\040\040\040\040\040\040\040\040\040\040context\040=\040{\040\040\040\040\040\040\040\040\040'type_traffic_lights':\040type_traffic_lights\040\040\040\040\040}\040\040\040\040\040return\040render(request,\040'admin/update_type_traffic_lights.html',\040context)\040\040\040\040@login_required(login_url='/')\040def\040UPDATE_TYPE_TRAFFIC_LIGHTS_DETAILS(request):\040\040\040\040\040\040\040\040\040if\040request.method\040==\040'POST':\040\040\040\040\040\040\040\040\040\040\040type_traffic_lights_id\040=\040request.POST.get('type_traffic_lights_id')\040\040\040\040\040\040\040\040\040\040\040type_traffic_lights_name\040=\040request.POST.get('type_traffic_lights_name')\040\040\040\040\040\040\040\040\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights.objects.get(id=type_traffic_lights_id)\040\040\040\040\040\040\040\040\040\040\040type_traffic_lights.type_traffic_lights_name\040=\040type_traffic_lights_name\040\040\040\040\040\040\040\040\040\040\040\040type_traffic_lights.save()\040\040\040\040\040\040\040\040\040\040\040messages.success(request,"Района\040е\040обновен\040успешно!")\040\040\040\040\040\040\040\040\040\040\040return\040redirect('manage_type_traffic_lights')\040\040\040\040\040\040\040\040\040return\040render(request,\040'admin/update_type_traffic_lights.html')\040\040\040@login_required(login_url='/')\040def\040DELETE_TYPE_TRAFFIC_LIGHTS(request,id):\040\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights.objects.get(id=id)\040\040\040\040\040type_traffic_lights.delete()\040\040\040\040\040messages.success(request,'Типът\040светофар\040е\040изтрит\040успешно!')\040\040\040\040\040\040return\040redirect('manage_type_traffic_lights')\040\040file:models.py\040\040\040\040class\040Type_Traffic_Lights(models.Model):\040\040\040\040\040\040\040\040\040\040type_traffic_lights_name\040=\040models.CharField(max_length=100,\040default='')\040\040\040\040\040created_at\040=\040models.DateTimeField(auto_now_add=True)\040\040\040\040\040updated_at\040=\040models.DateTimeField(auto_now=True)\040\040\040\040file:\040urls.py\040\040\040\040\040\040path('AddType_Traffic_Lights',\040adminviews.ADD_TYPE_TRAFFIC_LIGHTS,\040name='add_type_traffic_lights'),\040\040\040\040\040path('ManageType_Traffic_Lights',\040adminviews.MANAGE_TYPE_TRAFFIC_LIGHTS,\040name='manage_type_traffic_lights'),\040\040\040\040\040path('SearchType_Traffic_LightsAjax/',\040adminviews.SEARCH_TYPE_TRAFFIC_LIGHTS_AJAX,\040name='search_type_traffic_lights_ajax'),\040\040\040\040\040path('DeleteType_Traffic_Lights/<str:id>',\040adminviews.DELETE_TYPE_TRAFFIC_LIGHTS,\040name='delete_type_traffic_lights'),\040\040\040\040\040path('UpdateType_Traffic_Lights/<int:id>',\040adminviews.UPDATE_TYPE_TRAFFIC_LIGHTS,\040name='update_type_traffic_lights'),\040\040\040\040\040path('UpdateType_Traffic_LightsDetails',\040adminviews.UPDATE_TYPE_TRAFFIC_LIGHTS_DETAILS,\040name='update_type_traffic_lights_details'),;
CREATE\040TABLE\040odmvr\040(
\040\040\040\040id\040BIGINT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040odmvr_name\040VARCHAR(255)\040NOT\040NULL,
\040\040\040\040created_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040updated_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP
);
CREATE\040TABLE\040odmvr\040(\040\040\040\040\040id\040BIGINT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040odmvr_name\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040created_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP\040);
truncate\040odmvr;
describe\040odmvr;
INSERT\040INTO\040odmvr\040(odmvr_name)\040VALUES
('ОДМВР\040-\040Благоевград'),
('ОДМВР\040-\040Бургас'),
('ОДМВР\040-\040Варна'),
('ОДМВР\040-\040Велико\040Търново'),
('ОДМВР\040-\040Видин'),
('ОДМВР\040-\040Враца'),
('ОДМВР\040-\040Габрово'),
('ОДМВР\040-\040Добрич'),
('ОДМВР\040-\040Кърджали'),
('ОДМВР\040-\040Кюстендил'),
('ОДМВР\040-\040Ловеч'),
('ОДМВР\040-\040Монтана'),
('ОДМВР\040-\040Пазарджик'),
('ОДМВР\040-\040Перник'),
('ОДМВР\040-\040Плевен'),
('ОДМВР\040-\040Пловдив'),
('ОДМВР\040-\040Разград'),
('ОДМВР\040-\040Русе'),
('ОДМВР\040-\040Силистра'),
('ОДМВР\040-\040Сливен'),
('ОДМВР\040-\040Смолян'),
('ОДМВР\040-\040София'),
('ОДМВР\040-\040Стара\040Загора'),
('ОДМВР\040-\040Търговище'),
('ОДМВР\040-\040Хасково'),
('ОДМВР\040-\040Шумен'),
('ОДМВР\040-\040Ямбол');
INSERT\040INTO\040odmvr\040(odmvr_name)\040VALUES\040('ОДМВР\040-\040Благоевград'),\040('ОДМВР\040-\040Бургас'),\040('ОДМВР\040-\040Варна'),\040('ОДМВР\040-\040Велико\040Търново'),\040('ОДМВР\040-\040Видин'),\040('ОДМВР\040-\040Враца'),\040('ОДМВР\040-\040Габрово'),\040('ОДМВР\040-\040Добрич'),\040('ОДМВР\040-\040Кърджали'),\040('ОДМВР\040-\040Кюстендил'),\040('ОДМВР\040-\040Ловеч'),\040('ОДМВР\040-\040Монтана'),\040('ОДМВР\040-\040Пазарджик'),\040('ОДМВР\040-\040Перник'),\040('ОДМВР\040-\040Плевен'),\040('ОДМВР\040-\040Пловдив'),\040('ОДМВР\040-\040Разград'),\040('ОДМВР\040-\040Русе'),\040('ОДМВР\040-\040Силистра'),\040('ОДМВР\040-\040Сливен'),\040('ОДМВР\040-\040Смолян'),\040('ОДМВР\040-\040София'),\040('ОДМВР\040-\040Стара\040Загора'),\040('ОДМВР\040-\040Търговище'),\040('ОДМВР\040-\040Хасково'),\040('ОДМВР\040-\040Шумен'),\040('ОДМВР\040-\040Ямбол');
SELECT\040*\040FROM\040odmvr;
CREATE\040TABLE\040position_occupied\040(
\040\040\040\040id\040BIGINT(20)\040NOT\040NULL\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040position_occupied_name\040VARCHAR(255)\040NOT\040NULL,
\040\040\040\040created_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040updated_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP
);
CREATE\040TABLE\040position_occupied\040(\040\040\040\040\040id\040BIGINT(20)\040NOT\040NULL\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040position_occupied_name\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040created_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP\040);
show\040tables;
alter\040table\040position_occupied;
cREATE\040TABLE\040position_occupied\040(
\040\040\040\040id\040BIGINT(20)\040NOT\040NULL\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040position_occupied_name\040VARCHAR(255)\040NOT\040NULL,
\040\040\040\040created_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040updated_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP
);;
cREATE\040TABLE\040position_occupied\040(\040\040\040\040\040id\040BIGINT(20)\040NOT\040NULL\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040position_occupied_name\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040created_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP\040);
cREATE\040TABLE\040cmsapp_position_occupied\040(\040\040\040\040\040id\040BIGINT(20)\040NOT\040NULL\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040position_occupied_name\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040created_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP\040);
show\040create\040teable\040odmvr;
show\040create\040table\040odmvr;
RENAME\040TABLE\040odmvr\040TO\040cmsapp_odmvr;
INSERT\040INTO\040odmvr\040(odmvr_name)\040VALUES\040('ОДМВР\040-\040Благоевград'),\040('ОДМВР\040-\040Бургас'),\040('ОДМВР\040-\040Варна'),\040('ОДМВР\040-\040Велико\040Търново'),\040('ОДМВР\040-\040Видин'),\040('ОДМВР\040-\040Враца'),\040('ОДМВР\040-\040Габрово'),\040('ОДМВР\040-\040Добрич'),\040('ОДМВР\040-\040Кърджали'),\040('ОДМВР\040-\040Кюстендил'),\040('ОДМВР\040-\040Ловеч'),\040('ОДМВР\040-\040Монтана'),\040('ОДМВР\040-\040Пазарджик'),\040('ОДМВР\040-\040Перник'),\040('ОДМВР\040-\040Плевен'),\040('ОДМВР\040-\040Пловдив'),\040('ОДМВР\040-\040Разград'),\040('ОДМВР\040-\040Русе'),\040('ОДМВР\040-\040Силистра'),\040('ОДМВР\040-\040Сливен'),\040('ОДМВР\040-\040Смолян'),\040('ОДМВР\040-\040София'),\040('ОДМВР\040-\040Стара\040Загора'),\040('ОДМВР\040-\040Търговище'),\040('ОДМВР\040-\040Хасково'),\040('ОДМВР\040-\040Шумен'),\040('ОДМВР\040-\040Ямбол');
select\040*\040from\040cmsapp_odmvr;
INSERT\040INTO\040position_occupied\040(position_name)\040VALUES\040('Началник\040на\040отдел\040"Пътна\040полиция"');
INSERT\040INTO\040position_occupied\040(position_name)\040VALUES\040('Заместник-началник\040на\040отдел\040"Пътна\040полиция"');
INSERT\040INTO\040position_occupied\040(position_name)\040VALUES\040('Началник\040на\040сектор\040"Пътна\040полиция"');
INSERT\040INTO\040position_occupied\040(position_name)\040VALUES\040('Началник\040на\040група\040"Пътна\040полиция"');
INSERT\040INTO\040position_occupied\040(position_name)\040VALUES\040('Старши\040полицай\040(Пътна\040полиция)');
INSERT\040INTO\040position_occupied\040(position_name)\040VALUES\040('Полицай\040(Пътна\040полиция)');
INSERT\040INTO\040position_occupied\040(position_name)\040VALUES\040('Младши\040автоконтрольор\040I\040степен');
INSERT\040INTO\040position_occupied\040(position_name)\040VALUES\040('Младши\040автоконтрольор\040II\040степен');
INSERT\040INTO\040position_occupied\040(position_name)\040VALUES\040('Водач\040на\040оперативен\040автомобил\040I\040степен');
INSERT\040INTO\040position_occupied\040(position_name)\040VALUES\040('Водач\040на\040оперативен\040автомобил\040II\040степен');
INSERT\040INTO\040cmsapp_position_occupied\040(position_occupied_name)\040VALUES\040('Началник\040на\040отдел\040"Пътна\040полиция"');
INSERT\040INTO\040cmsapp_position_occupied\040(position_occupied_name)\040VALUES\040('Заместник-началник\040на\040отдел\040"Пътна\040полиция"');
INSERT\040INTO\040cmsapp_position_occupied\040(position_occupied_name)\040VALUES\040('Началник\040на\040сектор\040"Пътна\040полиция"');
INSERT\040INTO\040cmsapp_position_occupied\040(position_occupied_name)\040VALUES\040('Началник\040на\040група\040"Пътна\040полиция"');
INSERT\040INTO\040cmsapp_position_occupied\040(position_occupied_name)\040VALUES\040('Старши\040полицай\040(Пътна\040полиция)');
INSERT\040INTO\040cmsapp_position_occupied\040(position_occupied_name)\040VALUES\040('Полицай\040(Пътна\040полиция)');
INSERT\040INTO\040cmsapp_position_occupied\040(position_occupied_name)\040VALUES\040('Младши\040автоконтрольор\040I\040степен');
INSERT\040INTO\040cmsapp_position_occupied\040(position_occupied_name)\040VALUES\040('Младши\040автоконтрольор\040II\040степен');
INSERT\040INTO\040cmsapp_position_occupied\040(position_occupied_name)\040VALUES\040('Водач\040на\040оперативен\040автомобил\040I\040степен');
INSERT\040INTO\040cmsapp_position_occupied\040(position_occupied_name)\040VALUES\040('Водач\040на\040оперативен\040автомобил\040II\040степен');
Искам\040да\040се\040направи\040mysql\040таблица\040като\040type_traffic_lights
и\040да\040се\040казва\040vehile_type\040и\040да\040има\040следните\040колони:
ид
vehile_type_name
кажи\040ми\040как\040ръчно\040да\040направя\040таблица\040в\040mysql\040без\040manage.py\040migrate
След\040като\040се\040направи\040таблицата\040като\040се\040базираш\040на\040тези\040темплейти\040и\040views\040и\040url\040като\040запазиш\040типа\040на\040имената\040за\040да\040има\040последователност\040ми\040изпрати\040техните\040аналози\040но\040за\040новата\040таблица:
Искам\040да\040запазиш\040функциите\040на\040всички\040темплейти\040като\040ajax\040търсенето\040,\040запитването\040при\040изтриване\040на\040manage\040и\040т.н.
покажи\040ми\040целите\040три\040html\040темплейта(за\040add,manage,\040update)
Искам\040да\040запазиш\040функциите\040на\040всички\040темплейти\040като\040ajax\040търсенето\040,пагинация,\040запитване\040при\040изтриване\040на\040manage\040и\040т.н.
Покажи\040ми\040и\040urls.py
file:manage_type_traffic_lights.html
{%\040extends\040'base.html'\040%}
{%\040block\040content\040%}
{%\040if\040request.user.is_superuser\040%}\040<!--\040Проверка\040дали\040потребителят\040е\040администратор\040-->
<div\040class="row">
\040\040\040\040<div\040class="col-lg-12\040grid-margin\040stretch-card">
\040\040\040\040\040\040\040\040<div\040class="card">
\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="card-body">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<h4\040class="card-title">Управление\040на\040тип\040светофари</h4>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<form\040method="get"\040class="d-flex\040align-items-center\040w-100">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="form-group\040mb-0\040mr-2"\040style="flex:\0401;\040position:\040relative;">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<label\040for="query"\040class="sr-only">Филтър\040по\040тип\040светофар</label>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<input\040type="text"\040id="query"\040name="query"\040class="form-control"
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040placeholder="Филтър\040по\040тип\040светофар"\040value="{{\040query\040}}"\040autocomplete="off">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040id="suggestions"\040class="list-group"
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040style="position:\040absolute;\040z-index:\0401000;\040width:\040100%;\040display:\040none;"></div>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<button\040type="submit"\040class="btn\040btn-dark\040mr-2">Филтриране</button>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="{%\040url\040'manage_type_traffic_lights'\040%}"\040class="btn\040btn-secondary">Нулиране</a>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</form>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<script>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040document.addEventListener("DOMContentLoaded",\040function\040()\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040let\040queryInput\040=\040document.getElementById("query");
Искам\040да\040се\040направи\040mysql\040таблица\040като\040type_traffic_lights\040и\040да\040се\040казва\040vehile_type\040и\040да\040има\040следните\040колони:\040ид\040vehile_type_name\040\040кажи\040ми\040как\040ръчно\040да\040направя\040таблица\040в\040mysql\040без\040manage.py\040migrate\040След\040като\040се\040направи\040таблицата\040като\040се\040базираш\040на\040тези\040темплейти\040и\040views\040и\040url\040като\040запазиш\040типа\040на\040имената\040за\040да\040има\040последователност\040ми\040изпрати\040техните\040аналози\040но\040за\040новата\040таблица:\040Искам\040да\040запазиш\040функциите\040на\040всички\040темплейти\040като\040ajax\040търсенето\040,\040запитването\040при\040изтриване\040на\040manage\040и\040т.н.\040\040покажи\040ми\040целите\040три\040html\040темплейта(за\040add,manage,\040update)\040Искам\040да\040запазиш\040функциите\040на\040всички\040темплейти\040като\040ajax\040търсенето\040,пагинация,\040запитване\040при\040изтриване\040на\040manage\040и\040т.н.\040\040Покажи\040ми\040и\040urls.py\040file:manage_type_traffic_lights.html\040\040{%\040extends\040'base.html'\040%}\040{%\040block\040content\040%}\040\040{%\040if\040request.user.is_superuser\040%}\040<!\040\040<div\040class="row">\040\040\040\040\040<div\040class="col-lg-12\040grid-margin\040stretch-card">\040\040\040\040\040\040\040\040\040<div\040class="card">\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="card-body">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<h4\040class="card-title">Управление\040на\040тип\040светофари</h4>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<form\040method="get"\040class="d-flex\040align-items-center\040w-100">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="form-group\040mb-0\040mr-2"\040style="flex:\0401;\040position:\040relative;">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<label\040for="query"\040class="sr-only">Филтър\040по\040тип\040светофар</label>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<input\040type="text"\040id="query"\040name="query"\040class="form-control"\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040placeholder="Филтър\040по\040тип\040светофар"\040value="{{\040query\040}}"\040autocomplete="off">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040id="suggestions"\040class="list-group"\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040style="position:\040absolute;\040z-index:\0401000;\040width:\040100%;\040display:\040none;"></div>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<button\040type="submit"\040class="btn\040btn-dark\040mr-2">Филтриране</button>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="{%\040url\040'manage_type_traffic_lights'\040%}"\040class="btn\040btn-secondary">Нулиране</a>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</form>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<script>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040document.addEventListener("DOMContentLoaded",\040function\040()\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040let\040queryInput\040=\040document.getElementById("query");
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040let\040suggestionsBox\040=\040document.getElementById("suggestions");
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040queryInput.addEventListener("input",\040function\040()\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040let\040query\040=\040queryInput.value.trim();
queryInput.addEventListener("input",\040function\040()\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040let\040query\040=\040queryInput.value.trim();
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040if\040(query.length\040<\0402)\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"none";
if\040(query.length\040<\0402)\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"none";
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040return;
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040fetch("/SearchType_Traffic_LightsAjax/?query="\040+\040encodeURIComponent(query))
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040.then(response\040=>\040response.json())
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040.then(data\040=>\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.innerHTML\040=\040"";
}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040fetch("/SearchType_Traffic_LightsAjax/?query="\040+\040encodeURIComponent(query))\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040.then(response\040=>\040response.json())\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040.then(data\040=>\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.innerHTML\040=\040"";
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040if\040(data.length\040>\0400)\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"block";
if\040(data.length\040>\0400)\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"block";
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040data.forEach(type\040=>\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040let\040item\040=\040document.createElement("a");
data.forEach(type\040=>\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040let\040item\040=\040document.createElement("a");
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040item.href\040=\040"#";
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040item.classList.add("list-group-item",\040"list-group-item-action");
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040item.textContent\040=\040type.type_traffic_lights_name;
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040item.addEventListener("click",\040function\040(event)\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040event.preventDefault();
item.addEventListener("click",\040function\040(event)\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040event.preventDefault();
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040queryInput.value\040=\040type.type_traffic_lights_name;
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"none";
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040document.querySelector('form').submit();
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040});
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.appendChild(item);
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040});
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040}\040else\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"none";
}\040else\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"none";
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040})
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040.catch(error\040=>\040console.error("Error\040fetching\040suggestions:",\040error));
}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040})\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040.catch(error\040=>\040console.error("Error\040fetching\040suggestions:",\040error));
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040});
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040document.addEventListener("click",\040function\040(event)\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040if\040(!queryInput.contains(event.target)\040&&\040!suggestionsBox.contains(event.target))\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"none";
document.addEventListener("click",\040function\040(event)\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040if\040(!queryInput.contains(event.target)\040&&\040!suggestionsBox.contains(event.target))\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040suggestionsBox.style.display\040=\040"none";
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040});
}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040});
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040});
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</script>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<br\040/>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040include\040'includes/messages.html'\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="table-responsive"\040style="margin-top:50px;">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<table\040class="table\040table-bordered"\040style="border:1px\040solid\040#e8ecf1">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<thead>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<tr>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">#</th>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Тип\040Светофар</th>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Дата\040на\040създаване</th>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Дата\040на\040редактиране</th>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Действия</th>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</tr>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</thead>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<tbody>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040for\040i\040in\040type_traffic_lightss\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<tr>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040forloop.counter0|add:type_traffic_lightss.start_index\040}}</td>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040i.type_traffic_lights_name\040}}</td>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040i.created_at|date:"H:i\040ч.,\040d.m.Y"\040}}\040г.</td>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040i.updated_at|date:"H:i\040ч.,\040d.m.Y"\040}}\040г.</td>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="{%\040url\040'update_type_traffic_lights'\040i.id\040%}"
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040class="btn\040btn-success\040btn-sm">РЕДАКТИРАНЕ</a>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="#"\040data-href="{%\040url\040'delete_type_traffic_lights'\040i.id\040%}"
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040class="btn\040btn-danger\040btn-sm\040delete-btn"\040style="margin-left:5px">ИЗТРИВАНЕ</a>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</td>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</tr>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endfor\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</tbody>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</table>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040else\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<p\040class="text-center\040font-weight-bold"\040style="margin-top:20px;">Няма\040записи!</p>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss.has_other_pages\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="pagination"\040style="padding-top:\04010px;\040text-align:\040center;">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="btn-group\040btn-group-sm"\040role="group">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss.has_previous\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="?page={{\040type_traffic_lightss.previous_page_number\040}}"\040class="btn\040btn-secondary">⟵</a>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<span\040class="btn\040disabled">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040Страница\040{{\040type_traffic_lightss.number\040}}\040от\040{{\040type_traffic_lightss.paginator.num_pages\040}}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</span>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss.has_next\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="?page={{\040type_traffic_lightss.next_page_number\040}}"\040class="btn\040btn-secondary">⟶</a>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}
\040\040\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040</div>
\040\040\040\040</div>
</div>
<script>
\040\040\040\040document.querySelectorAll('.delete-btn').forEach(function\040(button)\040{
\040\040\040\040\040\040\040\040button.addEventListener('click',\040function\040(event)\040{
\040\040\040\040\040\040\040\040\040\040\040\040event.preventDefault();
</script>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<br\040/>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040include\040'includes/messages.html'\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="table-responsive"\040style="margin-top:50px;">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<table\040class="table\040table-bordered"\040style="border:1px\040solid\040#e8ecf1">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<thead>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<tr>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Тип\040Светофар</th>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Дата\040на\040създаване</th>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Дата\040на\040редактиране</th>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<th\040class="font-weight-bold">Действия</th>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</tr>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</thead>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<tbody>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040for\040i\040in\040type_traffic_lightss\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<tr>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040forloop.counter0|add:type_traffic_lightss.start_index\040}}</td>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040i.type_traffic_lights_name\040}}</td>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040i.created_at|date:"H:i\040ч.,\040d.m.Y"\040}}\040г.</td>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>{{\040i.updated_at|date:"H:i\040ч.,\040d.m.Y"\040}}\040г.</td>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<td>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="{%\040url\040'update_type_traffic_lights'\040i.id\040%}"\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040class="btn\040btn-success\040btn-sm">РЕДАКТИРАНЕ</a>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="#"\040data-href="{%\040url\040'delete_type_traffic_lights'\040i.id\040%}"\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040class="btn\040btn-danger\040btn-sm\040delete-btn"\040style="margin-left:5px">ИЗТРИВАНЕ</a>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</td>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</tr>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endfor\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</tbody>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</table>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040else\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<p\040class="text-center\040font-weight-bold"\040style="margin-top:20px;">Няма\040записи!</p>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss.has_other_pages\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="pagination"\040style="padding-top:\04010px;\040text-align:\040center;">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="btn-group\040btn-group-sm"\040role="group">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss.has_previous\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="?page={{\040type_traffic_lightss.previous_page_number\040}}"\040class="btn\040btn-secondary">⟵</a>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<span\040class="btn\040disabled">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040Страница\040{{\040type_traffic_lightss.number\040}}\040от\040{{\040type_traffic_lightss.paginator.num_pages\040}}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</span>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040if\040type_traffic_lightss.has_next\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="?page={{\040type_traffic_lightss.next_page_number\040}}"\040class="btn\040btn-secondary">⟶</a>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040endif\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040</div>\040</div>\040\040<script>\040\040\040\040\040document.querySelectorAll('.delete-btn').forEach(function\040(button)\040{\040\040\040\040\040\040\040\040\040button.addEventListener('click',\040function\040(event)\040{\040\040\040\040\040\040\040\040\040\040\040\040\040event.preventDefault();
\040\040\040\040\040\040\040\040\040\040\040\040const\040deleteUrl\040=\040this.getAttribute('data-href');
\040\040\040\040\040\040\040\040\040\040\040\040Swal.fire({
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040title:\040'Сигурни\040ли\040сте?',
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040text:\040'Това\040действие\040не\040може\040да\040бъде\040отменено!',
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040icon:\040'warning',
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040showCancelButton:\040true,
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040confirmButtonColor:\040'#d33',
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040cancelButtonColor:\040'#3085d6',
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040confirmButtonText:\040'Да,\040изтрий!',
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040cancelButtonText:\040'Отказ'
\040\040\040\040\040\040\040\040\040\040\040\040}).then((result)\040=>\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040if\040(result.isConfirmed)\040{
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040window.location.href\040=\040deleteUrl;
Swal.fire({\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040title:\040'Сигурни\040ли\040сте?',\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040text:\040'Това\040действие\040не\040може\040да\040бъде\040отменено!',\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040icon:\040'warning',\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040showCancelButton:\040true,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040confirmButtonColor:\040'#d33',\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040cancelButtonColor:\040'#3085d6',\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040confirmButtonText:\040'Да,\040изтрий!',\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040cancelButtonText:\040'Отказ'\040\040\040\040\040\040\040\040\040\040\040\040\040}).then((result)\040=>\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040if\040(result.isConfirmed)\040{\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040window.location.href\040=\040deleteUrl;
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040}
\040\040\040\040\040\040\040\040\040\040\040\040});
}\040\040\040\040\040\040\040\040\040\040\040\040\040});
\040\040\040\040\040\040\040\040});
\040\040\040\040});
</script>
{%\040else\040%}
<div\040class="alert\040alert-danger"\040role="alert">
\040\040\040\040<h4\040class="alert-heading">Достъп\040отказан!</h4>
\040\040\040\040<p>Тази\040страница\040е\040достъпна\040само\040за\040администратори.</p>
</div>
{%\040endif\040%}
{%\040endblock\040%}
file:add_type_traffic_lights.html
{%\040extends\040'base.html'\040%}
{%\040block\040content\040%}
{%\040if\040request.user.is_superuser\040%}\040<!--\040Проверка\040дали\040потребителят\040е\040администратор\040-->
<div\040class="row">
\040\040<div\040class="col-12\040grid-margin\040stretch-card">\040<!--\040Използва\040col-12\040за\040full\040width\040-->
\040\040\040\040<div\040class="card">
\040\040\040\040\040\040<div\040class="card-body">
\040\040\040\040\040\040\040\040<h4\040class="card-title">Добавяне\040на\040тип\040светофар</h4>
\040\040\040\040\040\040\040\040<hr>
\040\040\040\040\040\040\040\040<form\040class="forms-sample"\040method="POST"\040action="{%\040url\040'add_type_traffic_lights'\040%}">
\040\040\040\040\040\040\040\040\040\040{%\040include\040'includes/messages.html'\040%}
\040\040\040\040\040\040\040\040\040\040{%\040csrf_token\040%}
\040\040\040\040\040\040\040\040\040\040<div\040class="form-group">
\040\040\040\040\040\040\040\040\040\040\040\040<label\040for="exampleInputUsername1">Тип\040светофар</label>
\040\040\040\040\040\040\040\040\040\040\040\040<input\040type="text"\040placeholder="Моля,\040въведете\040тип\040светофар"\040name="type_traffic_lights_name"
\040\040\040\040\040\040\040\040\040\040\040\040\040\040class="form-control"\040required="true">
\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040\040\040<button\040type="submit"\040class="btn\040btn-primary\040mr-2">Добавяне</button>
\040\040\040\040\040\040\040\040</form>
\040\040\040\040\040\040</div>
\040\040\040\040</div>
\040\040</div>
</div>
{%\040else\040%}
<div\040class="alert\040alert-danger"\040role="alert">
\040\040<h4\040class="alert-heading">Достъп\040отказан!</h4>
\040\040<p>Тази\040страница\040е\040достъпна\040само\040за\040администратори.</p>
</div>
{%\040endif\040%}
{%\040endblock\040%}
file:update_type_traffic_lights.html
{%\040extends\040'base.html'\040%}
{%\040block\040content\040%}
<div\040class="row">
\040\040\040\040<div\040class="col-lg-12\040grid-margin\040stretch-card">
\040\040\040\040\040\040\040\040<div\040class="card">
\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="card-body">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<h4\040class="card-title">Редактиране\040на\040тип\040светофар</h4>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<form\040method="POST">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040csrf_token\040%}
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="form-group">
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<label\040for="type_traffic_lights_name">Тип\040светофар</label>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<input\040type="text"\040class="form-control"\040id="type_traffic_lights_name"\040name="type_traffic_lights_name"\040
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040value="{{\040type_traffic_lights.type_traffic_lights_name\040}}"\040required>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<button\040type="submit"\040class="btn\040btn-primary">Запази</button>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="{%\040url\040'manage_type_traffic_lights'\040%}"\040class="btn\040btn-secondary">Отказ</a>
\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</form>
\040\040\040\040\040\040\040\040\040\040\040\040</div>
\040\040\040\040\040\040\040\040</div>
\040\040\040\040</div>
</div>
{%\040endblock\040%}
file:adminviews.py
@login_required(login_url='/')
def\040ADD_TYPE_TRAFFIC_LIGHTS(request):
\040\040\040\040if\040request.method\040==\040"POST":
\040\040\040\040\040\040\040\040type_traffic_lights_name\040=\040request.POST.get('type_traffic_lights_name').strip()\040\040#\040Премахване\040на\040излишни\040интервали
\040\040\040\040\040\040\040\040if\040Type_Traffic_Lights.objects.filter(type_traffic_lights_name__iexact=type_traffic_lights_name).exists():
\040\040\040\040\040\040\040\040\040\040\040\040messages.error(request,\040"Тип\040светофар\040с\040такова\040име\040вече\040съществува!")
\040\040\040\040\040\040\040\040\040\040\040\040return\040redirect("add_type_traffic_lights")\040\040#\040Пренасочва\040обратно\040към\040страницата\040за\040добавяне
\040\040\040\040\040\040\040\040
\040\040\040\040\040\040\040\040#\040Ако\040няма\040дублиращо\040се\040име,\040създава\040нов\040регион
\040\040\040\040\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights(type_traffic_lights_name=type_traffic_lights_name)
\040\040\040\040\040\040\040\040type_traffic_lights.save()
\040\040\040\040\040\040\040\040messages.success(request,\040"Типът\040светофар\040е\040добавен\040успешно!")
\040\040\040\040\040\040\040\040return\040redirect("manage_type_traffic_lights")\040\040#\040Пренасочване\040към\040списъка\040с\040региони
\040\040\040\040return\040render(request,\040'admin/add_type_traffic_lights.html')
@login_required(login_url='/')
def\040MANAGE_TYPE_TRAFFIC_LIGHTS(request):
\040\040\040\040query\040=\040request.GET.get('query',\040'').strip()\040\040#\040Взимаме\040въведената\040стойност\040от\040полето\040за\040търсене
\040\040\040\040#\040Филтриране\040по\040име\040на\040регион,\040ако\040има\040въведена\040стойност
\040\040\040\040if\040query:
\040\040\040\040\040\040\040\040type_traffic_lights_list\040=\040Type_Traffic_Lights.objects.filter(type_traffic_lights_name__icontains=query)
\040\040\040\040else:
\040\040\040\040\040\040\040\040type_traffic_lights_list\040=\040Type_Traffic_Lights.objects.all()
\040\040\040\040paginator\040=\040Paginator(type_traffic_lights_list,\0404)\040\040#\040Пагинация\040-\0404\040региона\040на\040страница
\040\040\040\040page_number\040=\040request.GET.get('page')
\040\040\040\040
\040\040\040\040try:
\040\040\040\040\040\040\040\040type_traffic_lightss\040=\040paginator.page(page_number)
\040\040\040\040except\040PageNotAnInteger:
\040\040\040\040\040\040\040\040type_traffic_lightss\040=\040paginator.page(1)
\040\040\040\040except\040EmptyPage:
\040\040\040\040\040\040\040\040type_traffic_lightss\040=\040paginator.page(paginator.num_pages)
\040\040\040\040context\040=\040{
\040\040\040\040\040\040\040\040'type_traffic_lightss':\040type_traffic_lightss,
\040\040\040\040\040\040\040\040'query':\040query,\040\040#\040Подаваме\040стойността\040на\040заявката\040обратно\040в\040шаблона
\040\040\040\040}
\040\040\040\040
\040\040\040\040return\040render(request,\040'admin/manage_type_traffic_lights.html',\040context)
@login_required(login_url='/')
def\040SEARCH_TYPE_TRAFFIC_LIGHTS_AJAX(request):
\040\040\040\040query\040=\040request.GET.get('query',\040'').strip()
\040\040\040\040if\040query:
\040\040\040\040\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights.objects.filter(type_traffic_lights_name__icontains=query).values('id',\040'type_traffic_lights_name')[:10]
\040\040\040\040\040\040\040\040return\040JsonResponse(list(type_traffic_lights),\040safe=False)
\040\040\040\040return\040JsonResponse([],\040safe=False)
@login_required(login_url='/')
def\040UPDATE_TYPE_TRAFFIC_LIGHTS(request,\040id):
\040\040\040\040#\040Вземане\040на\040съществуващия\040запис
\040\040\040\040type_traffic_lights\040=\040get_object_or_404(Type_Traffic_Lights,\040id=id)
\040\040\040\040if\040request.method\040==\040'POST':
\040\040\040\040\040\040\040\040type_traffic_lights_name\040=\040request.POST.get('type_traffic_lights_name')
\040\040\040\040\040\040\040\040#\040Запазване\040на\040новите\040данни
\040\040\040\040\040\040\040\040type_traffic_lights.type_traffic_lights_name\040=\040type_traffic_lights_name
\040\040\040\040\040\040\040\040type_traffic_lights.save()
\040\040\040\040\040\040\040\040messages.success(request,\040"Типът\040светофар\040е\040обновен\040успешно!")
\040\040\040\040\040\040\040\040return\040redirect('manage_type_traffic_lights')
\040\040\040\040#\040Подаване\040на\040данните\040към\040шаблона
\040\040\040\040context\040=\040{
\040\040\040\040\040\040\040\040'type_traffic_lights':\040type_traffic_lights
\040\040\040\040}
\040\040\040\040return\040render(request,\040'admin/update_type_traffic_lights.html',\040context)
@login_required(login_url='/')
def\040UPDATE_TYPE_TRAFFIC_LIGHTS_DETAILS(request):
\040\040\040\040\040\040\040\040if\040request.method\040==\040'POST':
\040\040\040\040\040\040\040\040\040\040type_traffic_lights_id\040=\040request.POST.get('type_traffic_lights_id')
\040\040\040\040\040\040\040\040\040\040type_traffic_lights_name\040=\040request.POST.get('type_traffic_lights_name')
\040\040\040\040\040\040\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights.objects.get(id=type_traffic_lights_id)
\040\040\040\040\040\040\040\040\040\040type_traffic_lights.type_traffic_lights_name\040=\040type_traffic_lights_name
\040\040\040\040\040\040\040\040\040\040type_traffic_lights.save()
\040\040\040\040\040\040\040\040\040\040messages.success(request,"Района\040е\040обновен\040успешно!")
\040\040\040\040\040\040\040\040\040\040return\040redirect('manage_type_traffic_lights')
\040\040\040\040\040\040\040\040return\040render(request,\040'admin/update_type_traffic_lights.html')
@login_required(login_url='/')
def\040DELETE_TYPE_TRAFFIC_LIGHTS(request,id):
\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights.objects.get(id=id)
\040\040\040\040type_traffic_lights.delete()
\040\040\040\040messages.success(request,'Типът\040светофар\040е\040изтрит\040успешно!')
\040\040\040\040return\040redirect('manage_type_traffic_lights')
file:models.py
class\040Type_Traffic_Lights(models.Model):
\040\040\040\040#\040полета\040на\040модела
\040\040\040\040type_traffic_lights_name\040=\040models.CharField(max_length=100,\040default='')
\040\040\040\040created_at\040=\040models.DateTimeField(auto_now_add=True)
\040\040\040\040updated_at\040=\040models.DateTimeField(auto_now=True)
file:\040urls.py
\040\040\040\040path('AddType_Traffic_Lights',\040adminviews.ADD_TYPE_TRAFFIC_LIGHTS,\040name='add_type_traffic_lights'),
\040\040\040\040path('ManageType_Traffic_Lights',\040adminviews.MANAGE_TYPE_TRAFFIC_LIGHTS,\040name='manage_type_traffic_lights'),
\040\040\040\040path('SearchType_Traffic_LightsAjax/',\040adminviews.SEARCH_TYPE_TRAFFIC_LIGHTS_AJAX,\040name='search_type_traffic_lights_ajax'),
\040\040\040\040path('DeleteType_Traffic_Lights/<str:id>',\040adminviews.DELETE_TYPE_TRAFFIC_LIGHTS,\040name='delete_type_traffic_lights'),
\040\040\040\040path('UpdateType_Traffic_Lights/<int:id>',\040adminviews.UPDATE_TYPE_TRAFFIC_LIGHTS,\040name='update_type_traffic_lights'),
\040\040\040\040path('UpdateType_Traffic_LightsDetails',\040adminviews.UPDATE_TYPE_TRAFFIC_LIGHTS_DETAILS,\040name='update_type_traffic_lights_details'),
;
</script>\040{%\040else\040%}\040<div\040class="alert\040alert-danger"\040role="alert">\040\040\040\040\040<h4\040class="alert-heading">Достъп\040отказан!</h4>\040\040\040\040\040<p>Тази\040страница\040е\040достъпна\040само\040за\040администратори.</p>\040</div>\040{%\040endif\040%}\040{%\040endblock\040%}\040\040file:add_type_traffic_lights.html\040{%\040extends\040'base.html'\040%}\040{%\040block\040content\040%}\040\040{%\040if\040request.user.is_superuser\040%}\040<!\040\040<div\040class="row">\040\040\040<div\040class="col-12\040grid-margin\040stretch-card">\040<!\040\040\040\040\040<div\040class="card">\040\040\040\040\040\040\040<div\040class="card-body">\040\040\040\040\040\040\040\040\040<h4\040class="card-title">Добавяне\040на\040тип\040светофар</h4>\040\040\040\040\040\040\040\040\040<hr>\040\040\040\040\040\040\040\040\040<form\040class="forms-sample"\040method="POST"\040action="{%\040url\040'add_type_traffic_lights'\040%}">\040\040\040\040\040\040\040\040\040\040\040{%\040include\040'includes/messages.html'\040%}\040\040\040\040\040\040\040\040\040\040\040{%\040csrf_token\040%}\040\040\040\040\040\040\040\040\040\040\040<div\040class="form-group">\040\040\040\040\040\040\040\040\040\040\040\040\040<label\040for="exampleInputUsername1">Тип\040светофар</label>\040\040\040\040\040\040\040\040\040\040\040\040\040<input\040type="text"\040placeholder="Моля,\040въведете\040тип\040светофар"\040name="type_traffic_lights_name"\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040class="form-control"\040required="true">\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040\040\040<button\040type="submit"\040class="btn\040btn-primary\040mr-2">Добавяне</button>\040\040\040\040\040\040\040\040\040</form>\040\040\040\040\040\040\040</div>\040\040\040\040\040</div>\040\040\040</div>\040</div>\040\040{%\040else\040%}\040<div\040class="alert\040alert-danger"\040role="alert">\040\040\040<h4\040class="alert-heading">Достъп\040отказан!</h4>\040\040\040<p>Тази\040страница\040е\040достъпна\040само\040за\040администратори.</p>\040</div>\040{%\040endif\040%}\040{%\040endblock\040%}\040\040\040file:update_type_traffic_lights.html\040{%\040extends\040'base.html'\040%}\040\040{%\040block\040content\040%}\040<div\040class="row">\040\040\040\040\040<div\040class="col-lg-12\040grid-margin\040stretch-card">\040\040\040\040\040\040\040\040\040<div\040class="card">\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="card-body">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<h4\040class="card-title">Редактиране\040на\040тип\040светофар</h4>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<form\040method="POST">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040{%\040csrf_token\040%}\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<div\040class="form-group">\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<label\040for="type_traffic_lights_name">Тип\040светофар</label>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<input\040type="text"\040class="form-control"\040id="type_traffic_lights_name"\040name="type_traffic_lights_name"\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040value="{{\040type_traffic_lights.type_traffic_lights_name\040}}"\040required>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<button\040type="submit"\040class="btn\040btn-primary">Запази</button>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040<a\040href="{%\040url\040'manage_type_traffic_lights'\040%}"\040class="btn\040btn-secondary">Отказ</a>\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040</form>\040\040\040\040\040\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040\040\040\040\040</div>\040\040\040\040\040</div>\040</div>\040{%\040endblock\040%}\040\040\040file:adminviews.py\040\040\040\040@login_required(login_url='/')\040def\040ADD_TYPE_TRAFFIC_LIGHTS(request):\040\040\040\040\040if\040request.method\040==\040"POST":\040\040\040\040\040\040\040\040\040type_traffic_lights_name\040=\040request.POST.get('type_traffic_lights_name').strip()\040\040\040\040\040\040\040\040\040\040\040if\040Type_Traffic_Lights.objects.filter(type_traffic_lights_name__iexact=type_traffic_lights_name).exists():\040\040\040\040\040\040\040\040\040\040\040\040\040messages.error(request,\040"Тип\040светофар\040с\040такова\040име\040вече\040съществува!")\040\040\040\040\040\040\040\040\040\040\040\040\040return\040redirect("add_type_traffic_lights")\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights(type_traffic_lights_name=type_traffic_lights_name)\040\040\040\040\040\040\040\040\040type_traffic_lights.save()\040\040\040\040\040\040\040\040\040messages.success(request,\040"Типът\040светофар\040е\040добавен\040успешно!")\040\040\040\040\040\040\040\040\040return\040redirect("manage_type_traffic_lights")\040\040\040\040\040\040\040\040return\040render(request,\040'admin/add_type_traffic_lights.html')\040\040@login_required(login_url='/')\040def\040MANAGE_TYPE_TRAFFIC_LIGHTS(request):\040\040\040\040\040query\040=\040request.GET.get('query',\040'').strip()\040\040\040\040\040\040\040\040\040\040\040\040\040if\040query:\040\040\040\040\040\040\040\040\040type_traffic_lights_list\040=\040Type_Traffic_Lights.objects.filter(type_traffic_lights_name__icontains=query)\040\040\040\040\040else:\040\040\040\040\040\040\040\040\040type_traffic_lights_list\040=\040Type_Traffic_Lights.objects.all()\040\040\040\040\040\040paginator\040=\040Paginator(type_traffic_lights_list,\0404)\040\040\040\040\040\040\040page_number\040=\040request.GET.get('page')\040\040\040\040\040\040\040\040\040\040try:\040\040\040\040\040\040\040\040\040type_traffic_lightss\040=\040paginator.page(page_number)\040\040\040\040\040except\040PageNotAnInteger:\040\040\040\040\040\040\040\040\040type_traffic_lightss\040=\040paginator.page(1)\040\040\040\040\040except\040EmptyPage:\040\040\040\040\040\040\040\040\040type_traffic_lightss\040=\040paginator.page(paginator.num_pages)\040\040\040\040\040\040context\040=\040{\040\040\040\040\040\040\040\040\040'type_traffic_lightss':\040type_traffic_lightss,\040\040\040\040\040\040\040\040\040'query':\040query,\040\040\040\040\040\040\040}\040\040\040\040\040\040\040\040\040\040return\040render(request,\040'admin/manage_type_traffic_lights.html',\040context)\040\040@login_required(login_url='/')\040def\040SEARCH_TYPE_TRAFFIC_LIGHTS_AJAX(request):\040\040\040\040\040query\040=\040request.GET.get('query',\040'').strip()\040\040\040\040\040if\040query:\040\040\040\040\040\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights.objects.filter(type_traffic_lights_name__icontains=query).values('id',\040'type_traffic_lights_name')[:10]\040\040\040\040\040\040\040\040\040return\040JsonResponse(list(type_traffic_lights),\040safe=False)\040\040\040\040\040return\040JsonResponse([],\040safe=False)\040\040@login_required(login_url='/')\040def\040UPDATE_TYPE_TRAFFIC_LIGHTS(request,\040id):\040\040\040\040\040\040\040\040\040\040type_traffic_lights\040=\040get_object_or_404(Type_Traffic_Lights,\040id=id)\040\040\040\040\040\040if\040request.method\040==\040'POST':\040\040\040\040\040\040\040\040\040type_traffic_lights_name\040=\040request.POST.get('type_traffic_lights_name')\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040type_traffic_lights.type_traffic_lights_name\040=\040type_traffic_lights_name\040\040\040\040\040\040\040\040\040type_traffic_lights.save()\040\040\040\040\040\040\040\040\040\040messages.success(request,\040"Типът\040светофар\040е\040обновен\040успешно!")\040\040\040\040\040\040\040\040\040return\040redirect('manage_type_traffic_lights')\040\040\040\040\040\040\040\040\040\040\040context\040=\040{\040\040\040\040\040\040\040\040\040'type_traffic_lights':\040type_traffic_lights\040\040\040\040\040}\040\040\040\040\040return\040render(request,\040'admin/update_type_traffic_lights.html',\040context)\040\040\040\040@login_required(login_url='/')\040def\040UPDATE_TYPE_TRAFFIC_LIGHTS_DETAILS(request):\040\040\040\040\040\040\040\040\040if\040request.method\040==\040'POST':\040\040\040\040\040\040\040\040\040\040\040type_traffic_lights_id\040=\040request.POST.get('type_traffic_lights_id')\040\040\040\040\040\040\040\040\040\040\040type_traffic_lights_name\040=\040request.POST.get('type_traffic_lights_name')\040\040\040\040\040\040\040\040\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights.objects.get(id=type_traffic_lights_id)\040\040\040\040\040\040\040\040\040\040\040type_traffic_lights.type_traffic_lights_name\040=\040type_traffic_lights_name\040\040\040\040\040\040\040\040\040\040\040\040type_traffic_lights.save()\040\040\040\040\040\040\040\040\040\040\040messages.success(request,"Района\040е\040обновен\040успешно!")\040\040\040\040\040\040\040\040\040\040\040return\040redirect('manage_type_traffic_lights')\040\040\040\040\040\040\040\040\040return\040render(request,\040'admin/update_type_traffic_lights.html')\040\040\040@login_required(login_url='/')\040def\040DELETE_TYPE_TRAFFIC_LIGHTS(request,id):\040\040\040\040\040type_traffic_lights\040=\040Type_Traffic_Lights.objects.get(id=id)\040\040\040\040\040type_traffic_lights.delete()\040\040\040\040\040messages.success(request,'Типът\040светофар\040е\040изтрит\040успешно!')\040\040\040\040\040\040return\040redirect('manage_type_traffic_lights')\040\040file:models.py\040\040\040\040class\040Type_Traffic_Lights(models.Model):\040\040\040\040\040\040\040\040\040\040type_traffic_lights_name\040=\040models.CharField(max_length=100,\040default='')\040\040\040\040\040created_at\040=\040models.DateTimeField(auto_now_add=True)\040\040\040\040\040updated_at\040=\040models.DateTimeField(auto_now=True)\040\040\040\040file:\040urls.py\040\040\040\040\040\040path('AddType_Traffic_Lights',\040adminviews.ADD_TYPE_TRAFFIC_LIGHTS,\040name='add_type_traffic_lights'),\040\040\040\040\040path('ManageType_Traffic_Lights',\040adminviews.MANAGE_TYPE_TRAFFIC_LIGHTS,\040name='manage_type_traffic_lights'),\040\040\040\040\040path('SearchType_Traffic_LightsAjax/',\040adminviews.SEARCH_TYPE_TRAFFIC_LIGHTS_AJAX,\040name='search_type_traffic_lights_ajax'),\040\040\040\040\040path('DeleteType_Traffic_Lights/<str:id>',\040adminviews.DELETE_TYPE_TRAFFIC_LIGHTS,\040name='delete_type_traffic_lights'),\040\040\040\040\040path('UpdateType_Traffic_Lights/<int:id>',\040adminviews.UPDATE_TYPE_TRAFFIC_LIGHTS,\040name='update_type_traffic_lights'),\040\040\040\040\040path('UpdateType_Traffic_LightsDetails',\040adminviews.UPDATE_TYPE_TRAFFIC_LIGHTS_DETAILS,\040name='update_type_traffic_lights_details'),;
CREATE\040TABLE\040cmsapp_vehicle_type\040(
\040\040\040\040id\040BIGINT(20)\040NOT\040NULL\040AUTO_INCREMENT,
\040\040\040\040vehicle_type_name\040VARCHAR(255)\040NOT\040NULL,
\040\040\040\040created_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040updated_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,
\040\040\040\040PRIMARY\040KEY\040(id)
)\040ENGINE=InnoDB\040DEFAULT\040CHARSET=utf8mb4\040COLLATE=utf8mb4_general_ci;
CREATE\040TABLE\040cmsapp_vehicle_type\040(\040\040\040\040\040id\040BIGINT(20)\040NOT\040NULL\040AUTO_INCREMENT,\040\040\040\040\040vehicle_type_name\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040created_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,\040\040\040\040\040PRIMARY\040KEY\040(id)\040)\040ENGINE=InnoDB\040DEFAULT\040CHARSET=utf8mb4\040COLLATE=utf8mb4_general_ci;
INSERT\040INTO\040cmsapp_vehicle_type\040(vehicle_type_name,\040created_at,\040updated_at)\040VALUES
('Лек\040автомобил\040(до\0408+1\040места)',\040NOW(),\040NOW()),
('Лекотоварен\040автомобил\040за\040превоз\040на\040пътници\040(до\0405\040тона)\040–\040M2',\040NOW(),\040NOW()),
('Автобус\040(над\0405\040тона,\040над\0408\040места)\040–\040M3',\040NOW(),\040NOW()),
('Лекотоварен\040автомобил\040(до\0403.5\040тона)\040–\040N1',\040NOW(),\040NOW()),
('Товарен\040автомобил\040(от\0403.5\040до\04012\040тона)\040–\040N2',\040NOW(),\040NOW()),
('Товарен\040автомобил\040(над\04012\040тона)\040–\040N3',\040NOW(),\040NOW()),
('Мотоциклет\040(L3e)',\040NOW(),\040NOW()),
('Мотопед\040(L1e)',\040NOW(),\040NOW()),
('Скутер',\040NOW(),\040NOW()),
('Триколка\040(L5e)',\040NOW(),\040NOW()),
('Квадроцикъл\040(L7e)',\040NOW(),\040NOW()),
('Автокран',\040NOW(),\040NOW()),
('Самосвал',\040NOW(),\040NOW()),
('Фургони\040и\040кемпери',\040NOW(),\040NOW()),
('Пътно-строителни\040машини',\040NOW(),\040NOW()),
('Трактори\040и\040селскостопански\040машини',\040NOW(),\040NOW()),
('Леко\040ремарке\040(до\040750\040кг)\040–\040O1',\040NOW(),\040NOW()),
('Тежко\040ремарке\040(над\040750\040кг)\040–\040O2,\040O3,\040O4',\040NOW(),\040NOW()),
('Електромобил',\040NOW(),\040NOW()),
('Електрически\040мотопеди\040и\040мотоциклети',\040NOW(),\040NOW()),
('Хибридни\040автомобили',\040NOW(),\040NOW());
INSERT\040INTO\040cmsapp_vehicle_type\040(vehicle_type_name,\040created_at,\040updated_at)\040VALUES\040('Лек\040автомобил\040(до\0408+1\040места)',\040NOW(),\040NOW()),\040('Лекотоварен\040автомобил\040за\040превоз\040на\040пътници\040(до\0405\040тона)\040–\040M2',\040NOW(),\040NOW()),\040('Автобус\040(над\0405\040тона,\040над\0408\040места)\040–\040M3',\040NOW(),\040NOW()),\040('Лекотоварен\040автомобил\040(до\0403.5\040тона)\040–\040N1',\040NOW(),\040NOW()),\040('Товарен\040автомобил\040(от\0403.5\040до\04012\040тона)\040–\040N2',\040NOW(),\040NOW()),\040('Товарен\040автомобил\040(над\04012\040тона)\040–\040N3',\040NOW(),\040NOW()),\040('Мотоциклет\040(L3e)',\040NOW(),\040NOW()),\040('Мотопед\040(L1e)',\040NOW(),\040NOW()),\040('Скутер',\040NOW(),\040NOW()),\040('Триколка\040(L5e)',\040NOW(),\040NOW()),\040('Квадроцикъл\040(L7e)',\040NOW(),\040NOW()),\040('Автокран',\040NOW(),\040NOW()),\040('Самосвал',\040NOW(),\040NOW()),\040('Фургони\040и\040кемпери',\040NOW(),\040NOW()),\040('Пътно-строителни\040машини',\040NOW(),\040NOW()),\040('Трактори\040и\040селскостопански\040машини',\040NOW(),\040NOW()),\040('Леко\040ремарке\040(до\040750\040кг)\040–\040O1',\040NOW(),\040NOW()),\040('Тежко\040ремарке\040(над\040750\040кг)\040–\040O2,\040O3,\040O4',\040NOW(),\040NOW()),\040('Електромобил',\040NOW(),\040NOW()),\040('Електрически\040мотопеди\040и\040мотоциклети',\040NOW(),\040NOW()),\040('Хибридни\040автомобили',\040NOW(),\040NOW());
show\040tables;
CREATE\040TABLE\040cmsapp_vehicles_owners\040(
\040\040\040\040id\040BIGINT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040name\040VARCHAR(255)\040NOT\040NULL,
\040\040\040\040fathers_name\040VARCHAR(255)\040NOT\040NULL,
\040\040\040\040surname\040VARCHAR(255)\040NOT\040NULL,
\040\040\040\040personal_no\040VARCHAR(10)\040NOT\040NULL\040UNIQUE,
\040\040\040\040nationality\040VARCHAR(100)\040NOT\040NULL,
\040\040\040\040date_of_birth\040DATE\040NOT\040NULL,
\040\040\040\040date_of_expiry\040DATE\040NOT\040NULL,
\040\040\040\040document_number\040VARCHAR(50)\040NOT\040NULL\040UNIQUE,
\040\040\040\040place_of_birth\040VARCHAR(255)\040NOT\040NULL,
\040\040\040\040residence\040VARCHAR(255)\040NOT\040NULL,
\040\040\040\040height\040INT\040NOT\040NULL,
\040\040\040\040color_of_eyes\040VARCHAR(50)\040NOT\040NULL,
\040\040\040\040authority\040VARCHAR(255)\040NOT\040NULL,
\040\040\040\040date_of_issue\040DATE\040NOT\040NULL,
\040\040\040\040created_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040updated_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP
);
CREATE\040TABLE\040cmsapp_vehicles_owners\040(\040\040\040\040\040id\040BIGINT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040name\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040fathers_name\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040surname\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040personal_no\040VARCHAR(10)\040NOT\040NULL\040UNIQUE,\040\040\040\040\040nationality\040VARCHAR(100)\040NOT\040NULL,\040\040\040\040\040date_of_birth\040DATE\040NOT\040NULL,\040\040\040\040\040date_of_expiry\040DATE\040NOT\040NULL,\040\040\040\040\040document_number\040VARCHAR(50)\040NOT\040NULL\040UNIQUE,\040\040\040\040\040place_of_birth\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040residence\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040height\040INT\040NOT\040NULL,\040\040\040\040\040color_of_eyes\040VARCHAR(50)\040NOT\040NULL,\040\040\040\040\040authority\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040date_of_issue\040DATE\040NOT\040NULL,\040\040\040\040\040created_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040DATETIME\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP\040);
show\040table;s
;
show\040tables;
drop\040table\040ps_econt_city;
drop\040table\040ps_econt_street;
select\040*\040from\040cmsapp_vehicles_owners\040limit\0401\040\134G
select\040*\040from\040cmsapp_vehicles_owners\040limit\04010\040\134G
truncate\040cmsapp_vehicles_owners
;
truncate\040cmsapp_vehicles_owners;
select\040*\040from\040cmsapp_vehicles_owners\040limit\04010
;
select\040*\040from\040cmsapp_vehicles_owners\040limit\040100
;
show\040create\040table\040cmsapp_vehicles_owners;
describe\040cmsapp_vehicles_owners;
CREATE\040TABLE\040vehicles_licenses\040(
\040\040\040\040id\040BIGINT(20)\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040document_number\040VARCHAR(100)\040NOT\040NULL\040UNIQUE,\040\040--\040N\040на\040документа
\040\040\040\040date_of_issue\040DATE\040NOT\040NULL,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0404a\040Дата\040на\040издаване
\040\040\040\040date_of_expiry\040DATE\040NOT\040NULL,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0404b\040Валидност
\040\040\040\040authority\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0404c\040Издаден\040от
\040\040\040\040--\040Категории\040за\040шофьорски\040книжки
\040\040\040\040AM_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040A1_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040A2_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040A_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040B1_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040B_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040C1_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040C_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040D1_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040D_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040BE_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040C1E_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040CE_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040D1E_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040DE_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040TTM_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040TKT_DATE\040DATE\040DEFAULT\040NULL,
\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP
);
CREATE\040TABLE\040vehicles_licenses\040(\040\040\040\040\040id\040BIGINT(20)\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040document_number\040VARCHAR(100)\040NOT\040NULL\040UNIQUE,\040\040\040\040\040\040\040date_of_issue\040DATE\040NOT\040NULL,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040date_of_expiry\040DATE\040NOT\040NULL,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040authority\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040AM_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040A1_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040A2_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040A_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040B1_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040B_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040C1_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040C_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040D1_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040D_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040BE_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040C1E_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040CE_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040D1E_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040DE_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040TTM_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040TKT_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP\040);
describe\040vehicles_licenses;
drop\040table\040vehicles_licenses;
CREATE\040TABLE\040cmsapp_vehicles_licenses\040(\040\040\040\040\040id\040BIGINT(20)\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040document_number\040VARCHAR(100)\040NOT\040NULL\040UNIQUE,\040\040\040\040\040\040\040date_of_issue\040DATE\040NOT\040NULL,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040date_of_expiry\040DATE\040NOT\040NULL,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040authority\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040AM_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040A1_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040A2_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040A_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040B1_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040B_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040C1_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040C_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040D1_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040D_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040BE_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040C1E_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040CE_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040D1E_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040DE_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040TTM_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040TKT_DATE\040DATE\040DEFAULT\040NULL,\040\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP\040);
);
show\040table;s
;
show\040table;s
;
show\040tables;
desvcribe\040cmsapp_vehicles_licenses;
describe\040cmsapp_vehicles_licenses;
DESCRIBE\040cmsapp_vehicles_licenses;
show\040tables;
select\040*\040from\040cmsapp_vehicles_licenses\040limit\0403;
CREATE\040TABLE\040cmsapp_vehicles\040(
\040\040\040\040id\040BIGINT(20)\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040A\040VARCHAR(50)\040NOT\040NULL,\040\040\040\040\040\040\040--\040Регистрационен\040номер\040(TX\0406407AT)
\040\040\040\040K\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040D\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040ID\040на\040превозното\040средство\040(референция)
\040\040\040\040D2\040VARCHAR(100),\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040МЗ\040C11S\040MT
\040\040\040\040R\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040СИВ\040МЕТАЛИК
\040\040\040\040F1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0401485
\040\040\040\040F2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0401485
\040\040\040\040N1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040800
\040\040\040\040P1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0401328
\040\040\040\040S1\040VARCHAR(10),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0404+1
\040\040\040\040T\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040175
\040\040\040\040V1\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040V5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040E\040VARCHAR(50)\040UNIQUE,\040\040\040\040\040\040\040\040\040--\040TSMMZC11S00703581\040(Уникален\040номер)
\040\040\040\040P5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040M13A2125343
\040\040\040\040D1\040VARCHAR(100),\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040СУЗУКИ\040СУИФТ
\040\040\040\040F3\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0402485
\040\040\040\040N3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040P4\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0405800
\040\040\040\040O1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0401000
\040\040\040\040U2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0404350
\040\040\040\040V3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040V7\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040140
\040\040\040\040B\040DATE,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\04002.04.2009\040(Дата\040на\040производство)
\040\040\040\040P3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040БЕНЗИН
\040\040\040\040D3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040G\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0401055
\040\040\040\040N4\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040Q\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040O2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040400
\040\040\040\040U3\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\04071
\040\040\040\040V4\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040V8\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040J\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040М1
\040\040\040\040N5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040L\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0402
\040\040\040\040M\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040W\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040V9\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040EURO\0404
\040\040\040\040owner_id\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040--\040Собственик\040ID\040(референция\040към\040cmsapp_vehicles_owners)
\040\040\040\040valid_insurance\040BOOLEAN,\040\040\040\040\040\040--\040Валидна\040гражданска\040отговорност\040(1\040=\040Да,\0400\040=\040Не)
\040\040\040\040insurance_id\040BIGINT(20),\040\040\040\040\040\040--\040ID\040на\040гражданска\040отговорност
\040\040\040\040valid_vignette\040BOOLEAN,\040\040\040\040\040\040\040--\040Валидна\040винетка\040(1\040=\040Да,\0400\040=\040Не)
\040\040\040\040vignette_id\040BIGINT(20),\040\040\040\040\040\040\040--\040ID\040на\040винетка
\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,
\040\040\040\040FOREIGN\040KEY\040(D)\040REFERENCES\040vehicle_types(id),
\040\040\040\040FOREIGN\040KEY\040(owner_id)\040REFERENCES\040cmsapp_vehicles_owners(id),
\040\040\040\040FOREIGN\040KEY\040(insurance_id)\040REFERENCES\040insurance_table(id),
\040\040\040\040FOREIGN\040KEY\040(vignette_id)\040REFERENCES\040vignette_table(id)
);
CREATE\040TABLE\040cmsapp_vehicles\040(\040\040\040\040\040id\040BIGINT(20)\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040A\040VARCHAR(50)\040NOT\040NULL,\040\040\040\040\040\040\040\040\040\040\040\040K\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040D\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040D2\040VARCHAR(100),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040R\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040F1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040F2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040N1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040P1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040S1\040VARCHAR(10),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040T\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V1\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040E\040VARCHAR(50)\040UNIQUE,\040\040\040\040\040\040\040\040\040\040\040\040\040\040P5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040D1\040VARCHAR(100),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040F3\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040N3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040P4\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040O1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040U2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V7\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040B\040DATE,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040P3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040D3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040G\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040N4\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040Q\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040O2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040U3\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V4\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V8\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040J\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040N5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040L\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040M\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040W\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V9\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040owner_id\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040valid_insurance\040BOOLEAN,\040\040\040\040\040\040\040\040\040\040\040insurance_id\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040\040valid_vignette\040BOOLEAN,\040\040\040\040\040\040\040\040\040\040\040\040vignette_id\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,\040\040\040\040\040FOREIGN\040KEY\040(D)\040REFERENCES\040vehicle_types(id),\040\040\040\040\040FOREIGN\040KEY\040(owner_id)\040REFERENCES\040cmsapp_vehicles_owners(id),\040\040\040\040\040FOREIGN\040KEY\040(insurance_id)\040REFERENCES\040insurance_table(id),\040\040\040\040\040FOREIGN\040KEY\040(vignette_id)\040REFERENCES\040vignette_table(id)\040);
show\040tables;
CREATE\040TABLE\040cmsapp_vehicles\040(
\040\040\040\040id\040BIGINT(20)\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040A\040VARCHAR(50)\040NOT\040NULL,\040\040\040\040\040\040\040--\040Регистрационен\040номер\040(TX\0406407AT)
\040\040\040\040K\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040D\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040ID\040на\040превозното\040средство\040(референция)
\040\040\040\040D2\040VARCHAR(100),\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040МЗ\040C11S\040MT
\040\040\040\040R\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040СИВ\040МЕТАЛИК
\040\040\040\040F1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0401485
\040\040\040\040F2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0401485
\040\040\040\040N1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040800
\040\040\040\040P1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0401328
\040\040\040\040S1\040VARCHAR(10),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0404+1
\040\040\040\040T\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040175
\040\040\040\040V1\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040V5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040E\040VARCHAR(50)\040UNIQUE,\040\040\040\040\040\040\040\040\040--\040TSMMZC11S00703581\040(Уникален\040номер)
\040\040\040\040P5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040M13A2125343
\040\040\040\040D1\040VARCHAR(100),\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040СУЗУКИ\040СУИФТ
\040\040\040\040F3\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0402485
\040\040\040\040N3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040P4\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0405800
\040\040\040\040O1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0401000
\040\040\040\040U2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0404350
\040\040\040\040V3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040V7\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040140
\040\040\040\040B\040DATE,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\04002.04.2009\040(Дата\040на\040производство)
\040\040\040\040P3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040БЕНЗИН
\040\040\040\040D3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040G\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0401055
\040\040\040\040N4\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040Q\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040O2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040400
\040\040\040\040U3\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\04071
\040\040\040\040V4\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040V8\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040J\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040М1
\040\040\040\040N5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040L\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0402
\040\040\040\040M\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040W\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040V9\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040EURO\0404
\040\040\040\040owner_id\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040--\040Собственик\040ID\040(референция\040към\040cmsapp_vehicles_owners)
\040\040\040\040valid_insurance\040BOOLEAN,\040\040\040\040\040\040--\040Валидна\040гражданска\040отговорност\040(1\040=\040Да,\0400\040=\040Не)
\040\040\040\040insurance_id\040BIGINT(20),\040\040\040\040\040\040--\040ID\040на\040гражданска\040отговорност
\040\040\040\040valid_vignette\040BOOLEAN,\040\040\040\040\040\040\040--\040Валидна\040винетка\040(1\040=\040Да,\0400\040=\040Не)
\040\040\040\040vignette_id\040BIGINT(20),\040\040\040\040\040\040\040--\040ID\040на\040винетка
\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,
\040\040\040\040FOREIGN\040KEY\040(D)\040REFERENCES\040cmsapp_vehicle_type(id),
\040\040\040\040FOREIGN\040KEY\040(owner_id)\040REFERENCES\040cmsapp_vehicles_owners(id),
\040\040\040\040FOREIGN\040KEY\040(insurance_id)\040REFERENCES\040insurance_table(id),
\040\040\040\040FOREIGN\040KEY\040(vignette_id)\040REFERENCES\040vignette_table(id)
);
CREATE\040TABLE\040cmsapp_vehicles\040(\040\040\040\040\040id\040BIGINT(20)\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040A\040VARCHAR(50)\040NOT\040NULL,\040\040\040\040\040\040\040\040\040\040\040\040K\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040D\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040D2\040VARCHAR(100),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040R\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040F1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040F2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040N1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040P1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040S1\040VARCHAR(10),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040T\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V1\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040E\040VARCHAR(50)\040UNIQUE,\040\040\040\040\040\040\040\040\040\040\040\040\040\040P5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040D1\040VARCHAR(100),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040F3\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040N3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040P4\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040O1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040U2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V7\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040B\040DATE,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040P3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040D3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040G\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040N4\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040Q\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040O2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040U3\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V4\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V8\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040J\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040N5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040L\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040M\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040W\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V9\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040owner_id\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040valid_insurance\040BOOLEAN,\040\040\040\040\040\040\040\040\040\040\040insurance_id\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040\040valid_vignette\040BOOLEAN,\040\040\040\040\040\040\040\040\040\040\040\040vignette_id\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,\040\040\040\040\040FOREIGN\040KEY\040(D)\040REFERENCES\040cmsapp_vehicle_type(id),\040\040\040\040\040FOREIGN\040KEY\040(owner_id)\040REFERENCES\040cmsapp_vehicles_owners(id),\040\040\040\040\040FOREIGN\040KEY\040(insurance_id)\040REFERENCES\040insurance_table(id),\040\040\040\040\040FOREIGN\040KEY\040(vignette_id)\040REFERENCES\040vignette_table(id)\040);
describe\040cmsapp_vehicles;
describecmsapp_vehicle_type;
describe\040cmsapp_vehicle_type;
CREATE\040TABLE\040cmsapp_vehicles\040(
\040\040\040\040id\040BIGINT(20)\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040A\040VARCHAR(50)\040NOT\040NULL,\040\040\040\040\040\040\040--\040Регистрационен\040номер\040(TX\0406407AT)
\040\040\040\040K\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040D\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040ID\040на\040превозното\040средство\040(референция)
\040\040\040\040D2\040VARCHAR(100),\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040МЗ\040C11S\040MT
\040\040\040\040R\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040СИВ\040МЕТАЛИК
\040\040\040\040F1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0401485
\040\040\040\040F2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0401485
\040\040\040\040N1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040800
\040\040\040\040P1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0401328
\040\040\040\040S1\040VARCHAR(10),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0404+1
\040\040\040\040T\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040175
\040\040\040\040V1\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040V5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040E\040VARCHAR(50)\040UNIQUE,\040\040\040\040\040\040\040\040\040--\040TSMMZC11S00703581\040(Уникален\040номер)
\040\040\040\040P5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040M13A2125343
\040\040\040\040D1\040VARCHAR(100),\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040СУЗУКИ\040СУИФТ
\040\040\040\040F3\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0402485
\040\040\040\040N3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040P4\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0405800
\040\040\040\040O1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0401000
\040\040\040\040U2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0404350
\040\040\040\040V3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040V7\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040140
\040\040\040\040B\040DATE,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\04002.04.2009\040(Дата\040на\040производство)
\040\040\040\040P3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040БЕНЗИН
\040\040\040\040D3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040G\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0401055
\040\040\040\040N4\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040Q\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040O2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040400
\040\040\040\040U3\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\04071
\040\040\040\040V4\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040V8\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040J\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040М1
\040\040\040\040N5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040L\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\0402
\040\040\040\040M\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040W\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040***
\040\040\040\040V9\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040--\040EURO\0404
\040\040\040\040owner_id\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040--\040Собственик\040ID\040(референция\040към\040cmsapp_vehicles_owners)
\040\040\040\040valid_insurance\040BOOLEAN,\040\040\040\040\040\040--\040Валидна\040гражданска\040отговорност\040(1\040=\040Да,\0400\040=\040Не)
\040\040\040\040insurance_id\040BIGINT(20),\040\040\040\040\040\040--\040ID\040на\040гражданска\040отговорност
\040\040\040\040valid_vignette\040BOOLEAN,\040\040\040\040\040\040\040--\040Валидна\040винетка\040(1\040=\040Да,\0400\040=\040Не)
\040\040\040\040vignette_id\040BIGINT(20),\040\040\040\040\040\040\040--\040ID\040на\040винетка
\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,
\040\040\040\040FOREIGN\040KEY\040(D)\040REFERENCES\040cmsapp_vehicle_type(id),
\040\040\040\040FOREIGN\040KEY\040(owner_id)\040REFERENCES\040cmsapp_vehicles_owners(id),
\040\040\040\040FOREIGN\040KEY\040(insurance_id)\040REFERENCES\040insurance_table(id),
\040\040\040\040FOREIGN\040KEY\040(vignette_id)\040REFERENCES\040vignette_table(id)
);
CREATE\040TABLE\040cmsapp_vehicles\040(\040\040\040\040\040id\040BIGINT(20)\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040A\040VARCHAR(50)\040NOT\040NULL,\040\040\040\040\040\040\040\040\040\040\040\040K\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040D\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040D2\040VARCHAR(100),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040R\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040F1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040F2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040N1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040P1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040S1\040VARCHAR(10),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040T\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V1\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040E\040VARCHAR(50)\040UNIQUE,\040\040\040\040\040\040\040\040\040\040\040\040\040\040P5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040D1\040VARCHAR(100),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040F3\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040N3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040P4\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040O1\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040U2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V7\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040B\040DATE,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040P3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040D3\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040G\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040N4\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040Q\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040O2\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040U3\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V4\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V8\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040J\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040N5\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040L\040INT,\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040M\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040W\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040V9\040VARCHAR(50),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040owner_id\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040valid_insurance\040BOOLEAN,\040\040\040\040\040\040\040\040\040\040\040insurance_id\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040\040valid_vignette\040BOOLEAN,\040\040\040\040\040\040\040\040\040\040\040\040vignette_id\040BIGINT(20),\040\040\040\040\040\040\040\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,\040\040\040\040\040FOREIGN\040KEY\040(D)\040REFERENCES\040cmsapp_vehicle_type(id),\040\040\040\040\040FOREIGN\040KEY\040(owner_id)\040REFERENCES\040cmsapp_vehicles_owners(id),\040\040\040\040\040FOREIGN\040KEY\040(insurance_id)\040REFERENCES\040insurance_table(id),\040\040\040\040\040FOREIGN\040KEY\040(vignette_id)\040REFERENCES\040vignette_table(id)\040);
CREATE\040TABLE\040cmsapp_vehicles\040(
\040\040\040\040id\040BIGINT(20)\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040A\040VARCHAR(50)\040NOT\040NULL,\040\040\040\040\040\040\040
\040\040\040\040K\040VARCHAR(50),
\040\040\040\040D\040BIGINT(20),\040\040--\040Ще\040бъде\040външен\040ключ\040(ID\040на\040типа\040превозно\040средство)
\040\040\040\040D2\040VARCHAR(100),\040\040
\040\040\040\040R\040VARCHAR(50),\040\040
\040\040\040\040F1\040INT,\040\040
\040\040\040\040F2\040INT,\040\040
\040\040\040\040N1\040INT,\040\040
\040\040\040\040P1\040INT,\040\040
\040\040\040\040S1\040VARCHAR(10),\040\040
\040\040\040\040T\040INT,\040\040
\040\040\040\040V1\040VARCHAR(50),\040\040
\040\040\040\040V5\040VARCHAR(50),\040\040
\040\040\040\040E\040VARCHAR(50)\040UNIQUE,\040\040
\040\040\040\040P5\040VARCHAR(50),\040\040
\040\040\040\040D1\040VARCHAR(100),\040\040
\040\040\040\040F3\040INT,\040\040
\040\040\040\040N3\040VARCHAR(50),\040\040
\040\040\040\040P4\040INT,\040\040
\040\040\040\040O1\040INT,\040\040
\040\040\040\040U2\040INT,\040\040
\040\040\040\040V3\040VARCHAR(50),\040\040
\040\040\040\040V7\040INT,\040\040
\040\040\040\040B\040DATE,\040\040
\040\040\040\040P3\040VARCHAR(50),\040\040
\040\040\040\040D3\040VARCHAR(50),\040\040
\040\040\040\040G\040INT,\040\040
\040\040\040\040N4\040VARCHAR(50),\040\040
\040\040\040\040Q\040VARCHAR(50),\040\040
\040\040\040\040O2\040INT,\040\040
\040\040\040\040U3\040INT,\040\040
\040\040\040\040V4\040VARCHAR(50),\040\040
\040\040\040\040V8\040VARCHAR(50),\040\040
\040\040\040\040J\040VARCHAR(50),\040\040
\040\040\040\040N5\040VARCHAR(50),\040\040
\040\040\040\040L\040INT,\040\040
\040\040\040\040M\040VARCHAR(50),\040\040
\040\040\040\040W\040VARCHAR(50),\040\040
\040\040\040\040V9\040VARCHAR(50),\040\040
\040\040\040\040owner_id\040BIGINT(20),\040\040
\040\040\040\040valid_insurance\040BOOLEAN,\040\040
\040\040\040\040insurance_id\040BIGINT(20),\040\040
\040\040\040\040valid_vignette\040BOOLEAN,\040\040
\040\040\040\040vignette_id\040BIGINT(20),\040\040
\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP
);
CREATE\040TABLE\040cmsapp_vehicles\040(\040\040\040\040\040id\040BIGINT(20)\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040A\040VARCHAR(50)\040NOT\040NULL,\040\040\040\040\040\040\040\040\040\040\040\040K\040VARCHAR(50),\040\040\040\040\040D\040BIGINT(20),\040\040\040\040\040\040\040D2\040VARCHAR(100),\040\040\040\040\040\040\040R\040VARCHAR(50),\040\040\040\040\040\040\040F1\040INT,\040\040\040\040\040\040\040F2\040INT,\040\040\040\040\040\040\040N1\040INT,\040\040\040\040\040\040\040P1\040INT,\040\040\040\040\040\040\040S1\040VARCHAR(10),\040\040\040\040\040\040\040T\040INT,\040\040\040\040\040\040\040V1\040VARCHAR(50),\040\040\040\040\040\040\040V5\040VARCHAR(50),\040\040\040\040\040\040\040E\040VARCHAR(50)\040UNIQUE,\040\040\040\040\040\040\040P5\040VARCHAR(50),\040\040\040\040\040\040\040D1\040VARCHAR(100),\040\040\040\040\040\040\040F3\040INT,\040\040\040\040\040\040\040N3\040VARCHAR(50),\040\040\040\040\040\040\040P4\040INT,\040\040\040\040\040\040\040O1\040INT,\040\040\040\040\040\040\040U2\040INT,\040\040\040\040\040\040\040V3\040VARCHAR(50),\040\040\040\040\040\040\040V7\040INT,\040\040\040\040\040\040\040B\040DATE,\040\040\040\040\040\040\040P3\040VARCHAR(50),\040\040\040\040\040\040\040D3\040VARCHAR(50),\040\040\040\040\040\040\040G\040INT,\040\040\040\040\040\040\040N4\040VARCHAR(50),\040\040\040\040\040\040\040Q\040VARCHAR(50),\040\040\040\040\040\040\040O2\040INT,\040\040\040\040\040\040\040U3\040INT,\040\040\040\040\040\040\040V4\040VARCHAR(50),\040\040\040\040\040\040\040V8\040VARCHAR(50),\040\040\040\040\040\040\040J\040VARCHAR(50),\040\040\040\040\040\040\040N5\040VARCHAR(50),\040\040\040\040\040\040\040L\040INT,\040\040\040\040\040\040\040M\040VARCHAR(50),\040\040\040\040\040\040\040W\040VARCHAR(50),\040\040\040\040\040\040\040V9\040VARCHAR(50),\040\040\040\040\040\040\040owner_id\040BIGINT(20),\040\040\040\040\040\040\040valid_insurance\040BOOLEAN,\040\040\040\040\040\040\040insurance_id\040BIGINT(20),\040\040\040\040\040\040\040valid_vignette\040BOOLEAN,\040\040\040\040\040\040\040vignette_id\040BIGINT(20),\040\040\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP\040);
drop\040table\040cmsapp_vehicles;
CREATE\040TABLE\040cmsapp_vehicles\040(
\040\040\040\040id\040BIGINT(20)\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040A\040VARCHAR(50)\040NOT\040NULL,\040\040\040\040\040\040\040
\040\040\040\040K\040VARCHAR(50),
\040\040\040\040D\040BIGINT(20),\040\040--\040Външен\040ключ\040към\040таблицата\040с\040превозни\040средства
\040\040\040\040D2\040VARCHAR(100),\040\040
\040\040\040\040R\040VARCHAR(50),\040\040
\040\040\040\040F1\040INT,\040\040
\040\040\040\040F2\040INT,\040\040
\040\040\040\040N1\040INT,\040\040
\040\040\040\040P1\040INT,\040\040
\040\040\040\040S1\040VARCHAR(10),\040\040
\040\040\040\040T\040INT,\040\040
\040\040\040\040V1\040VARCHAR(50),\040\040
\040\040\040\040V5\040VARCHAR(50),\040\040
\040\040\040\040E\040VARCHAR(50)\040UNIQUE,\040\040
\040\040\040\040P5\040VARCHAR(50),\040\040
\040\040\040\040D1\040VARCHAR(100),\040\040
\040\040\040\040F3\040INT,\040\040
\040\040\040\040N3\040VARCHAR(50),\040\040
\040\040\040\040P4\040INT,\040\040
\040\040\040\040O1\040INT,\040\040
\040\040\040\040U2\040INT,\040\040
\040\040\040\040V3\040VARCHAR(50),\040\040
\040\040\040\040V7\040INT,\040\040
\040\040\040\040B\040DATE,\040\040
\040\040\040\040P3\040VARCHAR(50),\040\040
\040\040\040\040D3\040VARCHAR(50),\040\040
\040\040\040\040G\040INT,\040\040
\040\040\040\040N4\040VARCHAR(50),\040\040
\040\040\040\040Q\040VARCHAR(50),\040\040
\040\040\040\040O2\040INT,\040\040
\040\040\040\040U3\040INT,\040\040
\040\040\040\040V4\040VARCHAR(50),\040\040
\040\040\040\040V8\040VARCHAR(50),\040\040
\040\040\040\040J\040VARCHAR(50),\040\040
\040\040\040\040N5\040VARCHAR(50),\040\040
\040\040\040\040L\040INT,\040\040
\040\040\040\040M\040VARCHAR(50),\040\040
\040\040\040\040W\040VARCHAR(50),\040\040
\040\040\040\040V9\040VARCHAR(50),\040\040
\040\040\040\040owner_id\040BIGINT(20),\040\040
\040\040\040\040valid_insurance\040BOOLEAN,\040\040
\040\040\040\040insurance_id\040BIGINT(20),\040\040
\040\040\040\040valid_vignette\040BOOLEAN,\040\040
\040\040\040\040vignette_id\040BIGINT(20),\040\040
\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP
);
CREATE\040TABLE\040cmsapp_vehicles\040(\040\040\040\040\040id\040BIGINT(20)\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040A\040VARCHAR(50)\040NOT\040NULL,\040\040\040\040\040\040\040\040\040\040\040\040K\040VARCHAR(50),\040\040\040\040\040D\040BIGINT(20),\040\040\040\040\040\040\040D2\040VARCHAR(100),\040\040\040\040\040\040\040R\040VARCHAR(50),\040\040\040\040\040\040\040F1\040INT,\040\040\040\040\040\040\040F2\040INT,\040\040\040\040\040\040\040N1\040INT,\040\040\040\040\040\040\040P1\040INT,\040\040\040\040\040\040\040S1\040VARCHAR(10),\040\040\040\040\040\040\040T\040INT,\040\040\040\040\040\040\040V1\040VARCHAR(50),\040\040\040\040\040\040\040V5\040VARCHAR(50),\040\040\040\040\040\040\040E\040VARCHAR(50)\040UNIQUE,\040\040\040\040\040\040\040P5\040VARCHAR(50),\040\040\040\040\040\040\040D1\040VARCHAR(100),\040\040\040\040\040\040\040F3\040INT,\040\040\040\040\040\040\040N3\040VARCHAR(50),\040\040\040\040\040\040\040P4\040INT,\040\040\040\040\040\040\040O1\040INT,\040\040\040\040\040\040\040U2\040INT,\040\040\040\040\040\040\040V3\040VARCHAR(50),\040\040\040\040\040\040\040V7\040INT,\040\040\040\040\040\040\040B\040DATE,\040\040\040\040\040\040\040P3\040VARCHAR(50),\040\040\040\040\040\040\040D3\040VARCHAR(50),\040\040\040\040\040\040\040G\040INT,\040\040\040\040\040\040\040N4\040VARCHAR(50),\040\040\040\040\040\040\040Q\040VARCHAR(50),\040\040\040\040\040\040\040O2\040INT,\040\040\040\040\040\040\040U3\040INT,\040\040\040\040\040\040\040V4\040VARCHAR(50),\040\040\040\040\040\040\040V8\040VARCHAR(50),\040\040\040\040\040\040\040J\040VARCHAR(50),\040\040\040\040\040\040\040N5\040VARCHAR(50),\040\040\040\040\040\040\040L\040INT,\040\040\040\040\040\040\040M\040VARCHAR(50),\040\040\040\040\040\040\040W\040VARCHAR(50),\040\040\040\040\040\040\040V9\040VARCHAR(50),\040\040\040\040\040\040\040owner_id\040BIGINT(20),\040\040\040\040\040\040\040valid_insurance\040BOOLEAN,\040\040\040\040\040\040\040insurance_id\040BIGINT(20),\040\040\040\040\040\040\040valid_vignette\040BOOLEAN,\040\040\040\040\040\040\040vignette_id\040BIGINT(20),\040\040\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP\040);
show\040tables;
show\040create\040table\040cmsapp_vehicle_type
;
show\040create\040table\040cmsapp_vehicles_owners;
CREATE\040TABLE\040insurance_table\040(
\040\040\040\040id\040BIGINT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040mps_id\040BIGINT\040NOT\040NULL,\040\040--\040Връзка\040към\040превозното\040средство
\040\040\040\040insurance_policy\040VARCHAR(50)\040UNIQUE\040NOT\040NULL,\040\040--\040Застрахователна\040полица\040(BG/30/124001745413)
\040\040\040\040sticker_number\040VARCHAR(50)\040UNIQUE\040NOT\040NULL,\040\040--\040Стикер\040номер\040(128254020)
\040\040\040\040company\040VARCHAR(255)\040NOT\040NULL,\040\040--\040Застрахователна\040компания
\040\040\040\040issue_date\040DATE\040NOT\040NULL,\040\040--\040Дата\040на\040издаване\040(06.12.2024)
\040\040\040\040valid_from\040DATE\040NOT\040NULL,\040\040--\040Валидна\040от\040(06.12.2024)
\040\040\040\040valid_to\040DATE\040NOT\040NULL,\040\040--\040Валидна\040до\040(06.12.2025)
\040\040\040\040issue_place\040VARCHAR(255)\040NOT\040NULL,\040\040--\040Място\040на\040издаване\040(София)
\040\040\040\040insurer\040VARCHAR(255)\040NOT\040NULL,\040\040--\040Застраховател\040(ДЗИ)
\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040--\040Дата\040на\040създаване
\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,\040\040--\040Дата\040на\040последна\040промяна
\040\040\040\040FOREIGN\040KEY\040(mps_id)\040REFERENCES\040cmsapp_vehicles(id)\040ON\040DELETE\040CASCADE\040\040--\040Връзка\040към\040превозното\040средство
)\040ENGINE=InnoDB\040DEFAULT\040CHARSET=utf8mb4\040COLLATE=utf8mb4_general_ci;
CREATE\040TABLE\040insurance_table\040(\040\040\040\040\040id\040BIGINT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040mps_id\040BIGINT\040NOT\040NULL,\040\040\040\040\040\040\040insurance_policy\040VARCHAR(50)\040UNIQUE\040NOT\040NULL,\040\040\040\040\040\040\040sticker_number\040VARCHAR(50)\040UNIQUE\040NOT\040NULL,\040\040\040\040\040\040\040company\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040\040\040issue_date\040DATE\040NOT\040NULL,\040\040\040\040\040\040\040valid_from\040DATE\040NOT\040NULL,\040\040\040\040\040\040\040valid_to\040DATE\040NOT\040NULL,\040\040\040\040\040\040\040issue_place\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040\040\040insurer\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,\040\040\040\040\040\040\040FOREIGN\040KEY\040(mps_id)\040REFERENCES\040cmsapp_vehicles(id)\040ON\040DELETE\040CASCADE\040\040\040)\040ENGINE=InnoDB\040DEFAULT\040CHARSET=utf8mb4\040COLLATE=utf8mb4_general_ci;
CREATE\040TABLE\040vignette_table\040(
\040\040\040\040id\040BIGINT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040mps_id\040BIGINT\040NOT\040NULL,\040\040--\040Връзка\040към\040превозното\040средство
\040\040\040\040issue_date\040DATE\040NOT\040NULL,\040\040--\040Дата\040на\040издаване\040(06.12.2024)
\040\040\040\040valid_from\040DATE\040NOT\040NULL,\040\040--\040Валидна\040от\040(06.12.2024)
\040\040\040\040valid_to\040DATE\040NOT\040NULL,\040\040--\040Валидна\040до\040(06.12.2025)
\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040--\040Дата\040на\040създаване
\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,\040\040--\040Дата\040на\040последна\040промяна
\040\040\040\040FOREIGN\040KEY\040(mps_id)\040REFERENCES\040cmsapp_vehicles(id)\040ON\040DELETE\040CASCADE\040\040--\040Връзка\040към\040превозното\040средство
)\040ENGINE=InnoDB\040DEFAULT\040CHARSET=utf8mb4\040COLLATE=utf8mb4_general_ci;
CREATE\040TABLE\040vignette_table\040(\040\040\040\040\040id\040BIGINT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040mps_id\040BIGINT\040NOT\040NULL,\040\040\040\040\040\040\040issue_date\040DATE\040NOT\040NULL,\040\040\040\040\040\040\040valid_from\040DATE\040NOT\040NULL,\040\040\040\040\040\040\040valid_to\040DATE\040NOT\040NULL,\040\040\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040\040\040updated_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040ON\040UPDATE\040CURRENT_TIMESTAMP,\040\040\040\040\040\040\040FOREIGN\040KEY\040(mps_id)\040REFERENCES\040cmsapp_vehicles(id)\040ON\040DELETE\040CASCADE\040\040\040)\040ENGINE=InnoDB\040DEFAULT\040CHARSET=utf8mb4\040COLLATE=utf8mb4_general_ci;
--\040Променяме\040хоста\040на\040потребителя\040'stc',\040за\040да\040може\040да\040влиза\040от\040всякъде
ALTER\040USER\040'stc'@'localhost'\040IDENTIFIED\040BY\040'stc_pass';
CREATE\040USER\040'stc'@'%'\040IDENTIFIED\040BY\040'stc_pass';
--\040Даваме\040му\040всички\040привилегии\040върху\040базата\040'stc'
GRANT\040ALL\040PRIVILEGES\040ON\040stc.*\040TO\040'stc'@'%'\040WITH\040GRANT\040OPTION;
--\040Презареждаме\040привилегиите
FLUSH\040PRIVILEGES;
ALTER\040TABLE\040`cmsapp_traffic_fines`
ADD\040COLUMN\040`type_id`\040TINYINT(1)\040NOT\040NULL\040DEFAULT\0401\040COMMENT\040'1=Фиш,\0402=Акт';
ALTER\040TABLE\040`cmsapp_traffic_fines`\040ADD\040COLUMN\040`type_id`\040TINYINT(1)\040NOT\040NULL\040DEFAULT\0401\040COMMENT\040'1=Фиш,\0402=Акт';
show\040create\040table\040cmsapp_traffic_fines;
select\040*\040from\040cmsapp_traffic_fines;
truncate\040cmsapp_traffic_fines;
show\040table;s
;
show\040table;s
;
show\040tables;
SELECT\040id,\040city_name
INTO\040OUTFILE\040'/var/lib/mysql-files/cities.csv'
FIELDS\040TERMINATED\040BY\040','\040
ENCLOSED\040BY\040'"'\040
LINES\040TERMINATED\040BY\040'\134n'
FROM\040cmsapp_city;
SELECT\040id,\040city_name\040INTO\040OUTFILE\040'/var/lib/mysql-files/cities.csv'\040FIELDS\040TERMINATED\040BY\040','\040\040ENCLOSED\040BY\040'"'\040\040LINES\040TERMINATED\040BY\040'\134n'\040FROM\040cmsapp_city;
SELECT\040id,\040city_name\040INTO\040OUTFILE\040'cities.csv'\040FIELDS\040TERMINATED\040BY\040','\040\040ENCLOSED\040BY\040'"'\040\040LINES\040TERMINATED\040BY\040'\134n'\040FROM\040cmsapp_city;
SELECT\040id,\040street_name,\040city_id_id\040AS\040city_id
INTO\040OUTFILE\040'/var/lib/mysql-files/streets.csv'
FIELDS\040TERMINATED\040BY\040','\040
ENCLOSED\040BY\040'"'\040
LINES\040TERMINATED\040BY\040'\134n'
FROM\040cmsapp_street;
SELECT\040id,\040street_name,\040city_id_id\040AS\040city_id\040INTO\040OUTFILE\040'/var/lib/mysql-files/streets.csv'\040FIELDS\040TERMINATED\040BY\040','\040\040ENCLOSED\040BY\040'"'\040\040LINES\040TERMINATED\040BY\040'\134n'\040FROM\040cmsapp_street;
SELECT\040id,\040street_name,\040city_id_id\040AS\040city_id\040INTO\040OUTFILE\040'streets.csv'\040FIELDS\040TERMINATED\040BY\040','\040\040ENCLOSED\040BY\040'"'\040\040LINES\040TERMINATED\040BY\040'\134n'\040FROM\040cmsapp_street;
SELECT\040id,\040street_name,\040city_id_id\040AS\040city_id\040INTO\040OUTFILE\040'/tmp/streets.csv'\040FIELDS\040TERMINATED\040BY\040','\040\040ENCLOSED\040BY\040'"'\040\040LINES\040TERMINATED\040BY\040'\134n'\040FROM\040cmsapp_street;
SELECT\040id,\040city_name\040INTO\040OUTFILE\040'/tmp/cities.csv'\040FIELDS\040TERMINATED\040BY\040','\040\040ENCLOSED\040BY\040'"'\040\040LINES\040TERMINATED\040BY\040'\134n'\040FROM\040cmsapp_city;
show\040tables;
describe\040cmsapp_traffic_fines;
select\040*\040from\040cmsapp_traffic_fines;
show\040tables;
describe\040cmsapp_odmvr;
describe\040cmsapp_position_occupied;
describe\040cmsapp_customuser;
ALTER\040TABLE\040cmsapp_customuser
ADD\040COLUMN\040odmvr_id\040BIGINT(20)\040DEFAULT\040NULL,
ADD\040COLUMN\040position_id\040BIGINT(20)\040DEFAULT\040NULL,
ADD\040CONSTRAINT\040fk_odmvr\040FOREIGN\040KEY\040(odmvr_id)\040REFERENCES\040cmsapp_odmvr(id),
ADD\040CONSTRAINT\040fk_position\040FOREIGN\040KEY\040(position_id)\040REFERENCES\040cmsapp_position_occupied(id);
ALTER\040TABLE\040cmsapp_customuser\040ADD\040COLUMN\040odmvr_id\040BIGINT(20)\040DEFAULT\040NULL,\040ADD\040COLUMN\040position_id\040BIGINT(20)\040DEFAULT\040NULL,\040ADD\040CONSTRAINT\040fk_odmvr\040FOREIGN\040KEY\040(odmvr_id)\040REFERENCES\040cmsapp_odmvr(id),\040ADD\040CONSTRAINT\040fk_position\040FOREIGN\040KEY\040(position_id)\040REFERENCES\040cmsapp_position_occupied(id);
show\040tables;
select\040*\040from\040cmsapp_state;
truncate\040cmsapp_state;
